### 来自网络面经

#### 如何打开一个大文件？

1. 传统字符逐行读取

使用BufferedReader，保证按行读取大文件，显示使用缓冲、指定字符集，并自动关闭
```java
try (BufferedReader br = new BufferedReader(
        new InputStreamReader(new FileInputStream(path), StandardCharsets.UTF_8))) {
    String line;
    while ((line = br.readLine()) != null) {
        // 处理每行
    }
}
```

2. Java8的流式处理
利用惰性加载，减少内存占用，同时可以使用链式处理和并行流。
```java
try (Stream<String> lines = Files.lines(Paths.get(path), StandardCharsets.UTF_8)) {
    lines.forEach(line -> {
        // 处理每行
    });
}
```

3. JavaNIO高性能选项，可以通过零拷贝(内存映射)、随机访问来提高处理超大文件的性能
```java
try (FileChannel channel = FileChannel.open(Paths.get(path), StandardOpenOption.READ)) {
    MappedByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
    while (buffer.hasRemaining()) {
        byte b = buffer.get();
        // 高效访问字节数据
    }
}
```

4. 字节流+分块读取
能够分段处理大文件，有效控制内存
```java
try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(path))) {
    byte[] buffer = new byte[8192];
    int len;
    while ((len = bis.read(buffer)) != -1) {
        // 处理 buffer 内的数据
    }
}
```