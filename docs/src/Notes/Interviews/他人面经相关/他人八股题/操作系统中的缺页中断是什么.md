### 来自网络面经

#### 操作系统中的缺页中断是什么？

缺页中断又名硬中断（硬错误、分页错误、寻页缺失、缺页中断、页故障等），指当**软件试图访问已映射在虚拟地址空间中但未被加载在物理内存中的一个分页时，由MMU发出的中断**。

这一机制对于利用虚拟内存来增加程序可用内存空间的操作系统中是常见且有必要的

**软性缺页**：页缺失发生时，相关的页已经被加载进内存，但是没有向MMU注册的情况。操作系统只需要在MMU中注册相关页对应的物理地址即可。
**硬性缺页**：相关的页在页缺失发生时未被加载进内存的情况。此时需要：寻找到一个空闲的页。或者把另外一个使用中的页写到磁盘上（如果其在最后一次写入后发生了变化的话），并注销在MMU内的记录，将数据读入被选定的页，再向MMU注册该页

（**中断**：计算机在执行程序的过程中，当出现异常情况或特殊请求时，计算机停止现行程序的运行，转向对这些异常情况或特殊请求的处理，处理结束后再返回现行程序的间断处，继续执行原程序。）

页缺失的产生原因：
- 访问新分配的内存：若访问时虚拟也未映射到物理内存，必然触发页缺失
- 访问不在内存中的代码/数据：将该页从磁盘加载到内存中
- 页面置换：物理内存不足时会将不常用的页换出道外存，当程序再次访问的时候会触发缺页
- 共享内存：对于共享内存或通过mmap映射的文件，操作系统通常采用 “延迟加载” 策略，仅在程序首次访问该区域时，才将对应的页面从文件或其他进程的内存中加载