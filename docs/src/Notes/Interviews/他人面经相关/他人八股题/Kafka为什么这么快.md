### 来自虾皮提前批一面面经

#### kafka为什么这么快
**顺序写入优化**：kafka将消息顺序写入磁盘，减少磁盘寻道时间，比随机写入更高效，磁盘读写头顺序写入只需要移动一次。
因为Kafka消息按partition存储，每个partition对应磁盘上一个日志文件。

**批量处理技术**：kafka支持批量发送消息，生产者在发送消息时可以等待直到有足够的数据积累到一定量，然后再发送。这种方法减少了网络开销和磁盘I/O操作的次数，从而提高了吞吐量。

**零拷贝技术**：可以直接将数据从磁盘发送到网络套接字，避免了在用户空间和内核空间之间的多次数据拷贝。这大幅降低了CPU和内存的负载，提高了数据传输效率。
linux的sendfile()系统调用，在内核空间直接完成数据传输，不经过用户态缓冲区

**压缩技术**：支持对消息进行压缩，这不仅减少了网络传输的数据量，还提高了整体的吞吐量。
生产者可以指定压缩算法将批量消息压缩后发送，压缩后消息在broker中以压缩态存储，消费者拉去后自行解压。