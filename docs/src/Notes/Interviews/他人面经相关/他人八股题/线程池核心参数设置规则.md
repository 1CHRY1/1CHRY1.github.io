### 来自拼多多提前批一面

#### 线程池核心参数设置规则？美团动态调整方案？

线程池有七大核心参数：
1. 核心线程数：如果是CPU密集型任务则使用CPU核心数+1计算，如果是IO密集型任务则使用CPU核心数*（1+平均等待时间/平均计算时间）
2. 最大线程数：一般是核心线程数的2-4倍
3. 队列容量：若响应快则使用小队列，若吞吐优先则使用大队列来减少线程切换，队列长度为(最大可接受响应时间 × 吞吐量)
4. 空闲时间：一般设置几十秒-几分钟
5. 拒绝策略：高并发对延迟敏感 → CallerRunsPolicy（调用线程执行），吞吐优先 → 丢弃任务或抛异常（DiscardPolicy / AbortPolicy）

美团的做法主要是将线程池的参数抽象成了配置项放在配置中心，结合运行时的监控数据，通过线程池的setCorePoolSize等方法动态调整，配合可扩容队列实现按流量波动的自动调参