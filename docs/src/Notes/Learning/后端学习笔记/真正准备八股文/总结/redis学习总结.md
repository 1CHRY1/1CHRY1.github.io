- [🚀 Redis中常见的数据类型有哪些？](#-Redis中常见的数据类型有哪些？)
      - [💡 Redis中主要的数据结构有哪些？](#-redis中主要的数据结构有哪些)
      - [🔍 Redis版本更新后四种高级数据类型？](#-redis版本更新后四种高级数据类型)
      - [📚 Redis不同数据结构的底层实现？](#-redis不同数据结构的底层实现)
- [🚀 Redis为什么这么快？](#-redis为什么这么快)
      - [💡 简单回答Redis为什么这么快？](#-简单回答redis为什么这么快)
      - [🔍 扩展一下呢？](#-扩展一下呢)

- [🚀 Redis源码中有哪些巧妙的设计？举几个简单的例子？](#-redis源码中有哪些巧妙的设计举几个简单的例子)
      - [💡 回答重点？](#-回答重点)
      - [🔍 线程模型是什么？](#-线程模型是什么)
      - [🔍 Redis数据结构有什么特点？](#-redis数据结构有什么特点)
      - [🔍 Redis共享对象池？](#-redis共享对象池)
      - [🔍 Redis过期设计？](#-redis过期设计)
      - [🔍 Redis数据如何持久化？](#-redis数据如何持久化)

*Redis源码中有哪些巧妙的设计？举几个简单的例子？*
线程模型——单线程，IO多路复用+事件驱动机制，select，poll，epoll多路复用器，减少上下文切换和锁的开销，单节点可稳定处理5-10万并发量
数据结构——sds，动态扩展&预分配，二进制安全，常数时间获取长度；ziplist，紧凑，灵活；listpack，优化级联修改；渐进式rehash，扩缩容高性能
共享对象池——小整数，1-9999
过期设计——惰性删除，定期删除，结合，过期键高效管理，减小负担，防止性能抖动
数据持久化——AOF重写机制，增量重写，空间优化，异步性。

*Redis的持久化机制有哪些？*
RDB快照——快速加载，内存占用小，有丢失风险，子进程生成不阻塞，写时复制
AOF日志——可靠，文件更大，恢复更耗时，Redis4.0后rdb和aof混合持久化，写回策略，重写机制

*如何使用Redis实现布隆过滤器？*
多个哈希函数与一个比特数组实现，复杂度o(k)。
布隆过滤器——高效，节省空间，可扩展；可能误判，不可删除，哈希函数选择。
位图方式，redisBoolm
使用场景——爬虫，黑名单，分布式系统，推荐系统

*为什么Redis设计为单线程？6.0版本为何引入多线程？*
基于内存，瓶颈不在CPU中；减小上下文切换和锁的性能开销；使用I/O多路复用可提高I/O利用率；
执行瓶颈在网路I/O中，多线程可提高I/O处理速度

*Redis如何保证缓存与数据库的数据一致性？*
先删缓存，再改数据库——最多使用
缓存双删，删两次缓存，第二次延迟删除
监听binlog更新redis

*Redis中缓存击穿，缓存穿透，缓存雪崩是什么？*
缓存击穿——热点数据过期，大量请求打击；热点数据永不过期，使用互斥锁构建缓存；
缓存穿透——大量不存在的key请求，恶意打击；封禁ip等检查非法请求，布隆过滤器判断，缓存空值；
缓存雪崩——大量缓存同时过期；随机过期，多级缓存，缓存预热，互斥锁，服务熔断，构建集群

*Redis如何实现分布式锁*
set ex nx命令 —— 加锁，设置过期时间和锁的唯一值
lua脚本 —— 解锁，获取key判断是否是自己加的，是则del
单点故障 —— 红锁RedLock