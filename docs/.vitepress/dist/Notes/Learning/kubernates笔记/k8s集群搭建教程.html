<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>K8Sé›†ç¾¤æ­å»ºæ•™ç¨‹</title>
    <meta name="description" content="Chry's Tech Blog: An undergraduate's journey through backend development, sharing insights, tips, and experiences in web technologies.">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.wdCWLFA-.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DL-HuSWx.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.QNnWuVY8.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BLg0S_rR.js">
    <link rel="modulepreload" href="/assets/Notes_Learning_kubernatesç¬”è®°_k8sé›†ç¾¤æ­å»ºæ•™ç¨‹.md.BMKBUoVa.lean.js">
    <link rel="icon" href="/logo.jpg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-88239e62><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9d36b2a0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9d36b2a0> Skip to content </a><!--]--><!----><header class="VPNav" data-v-88239e62 data-v-3f596e99><div class="VPNavBar" data-v-3f596e99 data-v-448b24fa><div class="wrapper" data-v-448b24fa><div class="container" data-v-448b24fa><div class="title" data-v-448b24fa><div class="VPNavBarTitle has-sidebar" data-v-448b24fa data-v-bde034bd><a class="title" href="/" data-v-bde034bd><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.jpg" alt data-v-12532f52><!--]--><span data-v-bde034bd>Chry</span><!--[--><!--]--></a></div></div><div class="content" data-v-448b24fa><div class="content-body" data-v-448b24fa><!--[--><!--]--><div class="VPNavBarSearch search" data-v-448b24fa><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-448b24fa data-v-cfea1a9b><span id="main-nav-aria-label" class="visually-hidden" data-v-cfea1a9b> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/AboutMe.html" tabindex="0" data-v-cfea1a9b data-v-781abd5f><!--[--><span data-v-781abd5f>ğŸ‘‹ AboutMe</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Notes/index.html" tabindex="0" data-v-cfea1a9b data-v-781abd5f><!--[--><span data-v-781abd5f>ğŸ’­ Blogs</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Projects.html" tabindex="0" data-v-cfea1a9b data-v-781abd5f><!--[--><span data-v-781abd5f>ğŸ¦„ Projects</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Friends.html" tabindex="0" data-v-cfea1a9b data-v-781abd5f><!--[--><span data-v-781abd5f>ğŸ‘« Friends</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-448b24fa data-v-b92d3f48><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-b92d3f48 data-v-118a2152 data-v-b07c6b9c><span class="check" data-v-b07c6b9c><span class="icon" data-v-b07c6b9c><!--[--><span class="vpi-sun sun" data-v-118a2152></span><span class="vpi-moon moon" data-v-118a2152></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-448b24fa data-v-35db4f10 data-v-00f7b475><!--[--><a class="VPSocialLink no-icon" href="https://github.com/1CHRY1" aria-label="github" target="_blank" rel="noopener" data-v-00f7b475 data-v-8d004d60><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-448b24fa data-v-8402ca3d data-v-235860a0><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-235860a0><span class="vpi-more-horizontal icon" data-v-235860a0></span></button><div class="menu" data-v-235860a0><div class="VPMenu" data-v-235860a0 data-v-e55d315c><!----><!--[--><!--[--><!----><div class="group" data-v-8402ca3d><div class="item appearance" data-v-8402ca3d><p class="label" data-v-8402ca3d>Appearance</p><div class="appearance-action" data-v-8402ca3d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-8402ca3d data-v-118a2152 data-v-b07c6b9c><span class="check" data-v-b07c6b9c><span class="icon" data-v-b07c6b9c><!--[--><span class="vpi-sun sun" data-v-118a2152></span><span class="vpi-moon moon" data-v-118a2152></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8402ca3d><div class="item social-links" data-v-8402ca3d><div class="VPSocialLinks social-links-list" data-v-8402ca3d data-v-00f7b475><!--[--><a class="VPSocialLink no-icon" href="https://github.com/1CHRY1" aria-label="github" target="_blank" rel="noopener" data-v-00f7b475 data-v-8d004d60><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-448b24fa data-v-ee6a093c><span class="container" data-v-ee6a093c><span class="top" data-v-ee6a093c></span><span class="middle" data-v-ee6a093c></span><span class="bottom" data-v-ee6a093c></span></span></button></div></div></div></div><div class="divider" data-v-448b24fa><div class="divider-line" data-v-448b24fa></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-88239e62 data-v-1d925309><div class="container" data-v-1d925309><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-1d925309><span class="vpi-align-left menu-icon" data-v-1d925309></span><span class="menu-text" data-v-1d925309>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1d925309 data-v-d708445e><button data-v-d708445e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-88239e62 data-v-e2e257b0><div class="curtain" data-v-e2e257b0></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e2e257b0><span class="visually-hidden" id="sidebar-aria-label" data-v-e2e257b0> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-5c72bfd4><section class="VPSidebarItem level-0 collapsible is-link has-active" data-v-5c72bfd4 data-v-f54ec9ad><div class="item" tabindex="0" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><a class="VPLink link link" href="/Notes/Learning/index.html" data-v-f54ec9ad><!--[--><h2 class="text" data-v-f54ec9ad>Learning</h2><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f54ec9ad><span class="vpi-chevron-right caret-icon" data-v-f54ec9ad></span></div></div><div class="items" data-v-f54ec9ad><!--[--><section class="VPSidebarItem level-1 collapsible collapsed has-active" data-v-f54ec9ad data-v-f54ec9ad><div class="item" role="button" tabindex="0" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><h3 class="text" data-v-f54ec9ad>kubernatesç¬”è®°</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f54ec9ad><span class="vpi-chevron-right caret-icon" data-v-f54ec9ad></span></div></div><div class="items" data-v-f54ec9ad><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f54ec9ad data-v-f54ec9ad><div class="item" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><a class="VPLink link link" href="/Notes/Learning/kubernates%E7%AC%94%E8%AE%B0/k8s.html" data-v-f54ec9ad><!--[--><p class="text" data-v-f54ec9ad>k8s</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-f54ec9ad data-v-f54ec9ad><div class="item" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><a class="VPLink link link" href="/Notes/Learning/kubernates%E7%AC%94%E8%AE%B0/k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B.html" data-v-f54ec9ad><!--[--><p class="text" data-v-f54ec9ad>k8sé›†ç¾¤æ­å»ºæ•™ç¨‹</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-f54ec9ad data-v-f54ec9ad><div class="item" role="button" tabindex="0" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><h3 class="text" data-v-f54ec9ad>åç«¯å­¦ä¹ ç¬”è®°</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f54ec9ad><span class="vpi-chevron-right caret-icon" data-v-f54ec9ad></span></div></div><div class="items" data-v-f54ec9ad><!--[--><div class="VPSidebarItem level-2 is-link" data-v-f54ec9ad data-v-f54ec9ad><div class="item" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><a class="VPLink link link" href="/Notes/Learning/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Day1.html" data-v-f54ec9ad><!--[--><p class="text" data-v-f54ec9ad>Day1</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-f54ec9ad data-v-f54ec9ad><div class="item" role="button" tabindex="0" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><h3 class="text" data-v-f54ec9ad>é¡¹ç›®ç›¸å…³ç¬”è®°</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f54ec9ad><span class="vpi-chevron-right caret-icon" data-v-f54ec9ad></span></div></div><div class="items" data-v-f54ec9ad><!--[--><section class="VPSidebarItem level-2 collapsible collapsed" data-v-f54ec9ad data-v-f54ec9ad><div class="item" role="button" tabindex="0" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><h4 class="text" data-v-f54ec9ad>å´©å²¸é¡¹ç›®</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f54ec9ad><span class="vpi-chevron-right caret-icon" data-v-f54ec9ad></span></div></div><div class="items" data-v-f54ec9ad><!--[--><div class="VPSidebarItem level-3 is-link" data-v-f54ec9ad data-v-f54ec9ad><div class="item" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><a class="VPLink link link" href="/Notes/Learning/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/%E5%B4%A9%E5%B2%B8%E9%A1%B9%E7%9B%AE/%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3.html" data-v-f54ec9ad><!--[--><p class="text" data-v-f54ec9ad>æ“ä½œæ–‡æ¡£</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible collapsed" data-v-f54ec9ad data-v-f54ec9ad><div class="item" role="button" tabindex="0" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><h4 class="text" data-v-f54ec9ad>æ°´æ²™ç›‘æµ‹é¡¹ç›®</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-f54ec9ad><span class="vpi-chevron-right caret-icon" data-v-f54ec9ad></span></div></div><div class="items" data-v-f54ec9ad><!--[--><div class="VPSidebarItem level-3 is-link" data-v-f54ec9ad data-v-f54ec9ad><div class="item" data-v-f54ec9ad><div class="indicator" data-v-f54ec9ad></div><a class="VPLink link link" href="/Notes/Learning/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3%E7%AC%94%E8%AE%B0/%E6%B0%B4%E6%B2%99%E7%9B%91%E6%B5%8B%E9%A1%B9%E7%9B%AE/%E7%B3%BB%E7%BB%9F%E9%87%8D%E5%90%AF%E6%96%87%E6%A1%A3.html" data-v-f54ec9ad><!--[--><p class="text" data-v-f54ec9ad>ç³»ç»Ÿé‡å¯æ–‡æ¡£</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-88239e62 data-v-e46efae2><div class="VPDoc has-sidebar has-aside" data-v-e46efae2 data-v-16591eae><!--[--><!--]--><div class="container" data-v-16591eae><div class="aside" data-v-16591eae><div class="aside-curtain" data-v-16591eae></div><div class="aside-container" data-v-16591eae><div class="aside-content" data-v-16591eae><div class="VPDocAside" data-v-16591eae data-v-c3b007cc><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-c3b007cc data-v-50f28214><div class="content" data-v-50f28214><div class="outline-marker" data-v-50f28214></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-50f28214>å¯¼èˆªæ </div><ul class="VPDocOutlineItem root" data-v-50f28214 data-v-112f903c><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-c3b007cc></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-16591eae><div class="content-container" data-v-16591eae><!--[--><!--]--><main class="main" data-v-16591eae><div style="position:relative;" class="vp-doc _Notes_Learning_kubernates%E7%AC%94%E8%AE%B0_k8s%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B" data-v-16591eae><div><ul><li></li></ul><h1 id="k8sé›†ç¾¤æ­å»ºæ•™ç¨‹" tabindex="-1">K8Sé›†ç¾¤æ­å»ºæ•™ç¨‹ <a class="header-anchor" href="#k8sé›†ç¾¤æ­å»ºæ•™ç¨‹" aria-label="Permalink to &quot;K8Sé›†ç¾¤æ­å»ºæ•™ç¨‹&quot;">â€‹</a></h1><h2 id="_1-å‰è¿°" tabindex="-1">1 å‰è¿° <a class="header-anchor" href="#_1-å‰è¿°" aria-label="Permalink to &quot;1 å‰è¿°&quot;">â€‹</a></h2><h3 id="_1-1-äº‘åŸç”Ÿå®šä¹‰" tabindex="-1">1.1 äº‘åŸç”Ÿå®šä¹‰ <a class="header-anchor" href="#_1-1-äº‘åŸç”Ÿå®šä¹‰" aria-label="Permalink to &quot;1.1 äº‘åŸç”Ÿå®šä¹‰&quot;">â€‹</a></h3><ul><li><p>Pivotalã€Šä¼ ç»Ÿåº”ç”¨å’ŒSOAå‘äº‘åŸç”Ÿè½¬å‹æŒ‡å—ã€‹ï¼ˆ2015ï¼‰çš„äº‘åŸç”Ÿçš„ç‰¹å¾ï¼š</p><ul><li><p>ç¬¦åˆ 12 è¦ç´ åº”ç”¨</p><ul><li>åŸºå‡†ä»£ç ï¼šä¸€ä»½åŸºå‡†ä»£ç ï¼Œå¤šä»½éƒ¨ç½²ï¼ˆç±»ä¼¼äºGitç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„mainåˆ†æ”¯ï¼‰ï¼›</li><li>æ˜¾ç¤ºå£°æ˜æ‰€æœ‰ä¾èµ–å…³ç³»ï¼šé€šè¿‡ä¾èµ–æ¸…å•ï¼Œç¡®åˆ‡åœ°å£°æ˜æ‰€æœ‰ä¾èµ–é¡¹ï¼›</li><li>æŠŠåç«¯æœåŠ¡å½“ä½œé™„åŠ èµ„æºï¼šå„ç§åç«¯æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€é‚®ä»¶æœåŠ¡ã€ç¼“å­˜ç³»ç»Ÿï¼‰ï¼Œä¸åŒºåˆ«å¯¹å¾…æœ¬åœ°æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡ï¼›</li><li>æ„å»ºã€å‘å¸ƒã€è¿è¡Œï¼šä¸¥æ ¼åŒºåˆ†æ„å»ºã€å‘å¸ƒã€è¿è¡Œè¿™ä¸‰ä¸ªæ­¥éª¤ï¼›</li><li>æ— çŠ¶æ€è¿›ç¨‹ï¼šåº”ç”¨çš„è¿›ç¨‹å¿…é¡»æ— çŠ¶æ€ï¼›</li><li>ç«¯å£ç»‘å®šï¼šäº’è”ç½‘åº”ç”¨é€šè¿‡ç«¯å£ç»‘å®šæ¥æä¾›æœåŠ¡ï¼Œå¹¶ç›‘å¬å‘é€è‡³è¯¥ç«¯å£çš„è¯·æ±‚ã€‚åº”ç”¨å®Œå…¨è‡ªæˆ‘åŠ è½½ï¼Œä¸ä¾èµ–äºä»»ä½•ç½‘ç»œæœåŠ¡å™¨ï¼›</li><li>å¹¶å‘ï¼šé€šè¿‡è¿›ç¨‹æ¨¡å‹è¿›è¡Œæ‰©å±•ã€‚è¿›ç¨‹æ˜¯ä¸€ç­‰å…¬æ°‘ï¼›</li><li>æ˜“å¤„ç†ï¼šè¿›ç¨‹å¯ä»¥ç¬é—´å¼€å¯æˆ–åœæ­¢ï¼Œæœ‰åˆ©äºå¿«é€Ÿã€å¼¹æ€§çš„ä¼¸ç¼©åº”ç”¨ã€‚è¿›ç¨‹åº”è¿½æ±‚æœ€å°å¯åŠ¨æ—¶é—´ï¼›è¿›ç¨‹ä¸€æ—¦æ¥å—ç»ˆæ­¢ä¿¡å·å°±ä¼šä¼˜åŒ–çš„ç»ˆæ­¢ï¼›è¿›ç¨‹åœ¨é¢å¯¹çªç„¶æ­»äº¡æ—¶ä¿æŒå¥å£®ï¼›</li><li>å¼€å‘ç¯å¢ƒä¸çº¿ä¸Šç¯å¢ƒç­‰ä»·ï¼šå°½å¯èƒ½çš„ä¿æŒå¼€å‘ï¼Œé¢„å‘å¸ƒï¼Œçº¿ä¸Šç¯å¢ƒç›¸åŒï¼Œä»¥å°½é‡åšåˆ°æŒç»­éƒ¨ç½²ï¼›</li><li>æ—¥å¿—ï¼šåº”ç”¨æœ¬èº«ä»ä¸å­˜å‚¨è‡ªå·±çš„è¾“å‡ºæµï¼Œä¸åº”è¯¥è¯•å›¾å»å†™æˆ–è€…ç®¡ç†æ—¥å¿—æ–‡ä»¶ï¼Œç›¸åï¼Œæ¯ä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹éƒ½ä¼šç›´æ¥çš„æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰äº‹ä»¶æµï¼›</li><li>ç®¡ç†è¿›ç¨‹ï¼šåå°ç®¡ç†ä»»åŠ¡å½“ä½œä¸€æ¬¡æ€§è¿›ç¨‹è¿è¡Œï¼›</li></ul></li><li><p>é¢å‘å¾®æœåŠ¡æ¶æ„</p><ul><li><p>å¾®æœåŠ¡å°†åˆ†è§£ä¸ºå¤šä¸ªâ€œä»…åšå¥½ä¸€ä»¶äº‹â€çš„å¯ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡ã€‚è¿™ä»¶äº‹é€šå¸¸ä»£è¡¨æŸé¡¹ä¸šåŠ¡èƒ½åŠ›ï¼Œæˆ–è€…æœ€å°å¯æä¾›ä¸šåŠ¡ä»·å€¼çš„â€œåŸå­â€œæœåŠ¡å•å…ƒã€‚å…·å¤‡ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><p>å•ä½“ç³»ç»Ÿ</p><ul><li>å˜æ›´å‘¨æœŸè§£è€¦ï¼šåªè¦å˜æ›´é™äºå•ä¸€æœ‰ç•Œçš„ç¯å¢ƒï¼Œå¹¶ä¸”æœåŠ¡ç»§ç»­å±¥è¡Œå…¶ç°æœ‰åˆçº¦ï¼›å®ç°äº†æ›´é¢‘ç¹å’Œå¿«é€Ÿçš„éƒ¨ç½²ï¼Œä»è€Œå®ç°äº†æŒç»­çš„ä»·å€¼æµåŠ¨ï¼›</li><li>å‡å°‘ä¸šåŠ¡é¢†åŸŸå’Œç°æœ‰ä»£ç çš„å­¦ä¹ è´Ÿæ‹…ï¼›</li><li>å¯ä»¥åŠ å¿«é‡‡ç”¨æ–°æŠ€æœ¯çš„æ­¥ä¼ï¼›</li><li>æä¾›ç‹¬ç«‹ã€é«˜æ•ˆçš„æœåŠ¡æ‰©å±•ï¼›</li></ul></li></ul></li><li><p>è‡ªæœåŠ¡æ•æ·æ¶æ„ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯DevOpsï¼‰ï¼š</p><ul><li>ä¸€ä¸ªèƒ½å¤ŸæŒç»­éƒ¨ç½²å’Œè¿è¡Œè¿™äº›å¾®æœåŠ¡çš„å¹³å°ï¼›å¦‚ä»£ç ä»¥Gitå½¢å¼â€œæ¨é€â€ã€‚ ç„¶åï¼Œè‡ªæœåŠ¡æ•æ·å¹³å°æ„å»ºåº”ç”¨ç¨‹åºå·¥ä»¶ï¼Œæ„å»ºåº”ç”¨ç¨‹åºç¯å¢ƒï¼Œéƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œå¹¶å¯åŠ¨å¿…è¦çš„è¿›ç¨‹ã€‚ å›¢é˜Ÿä¸å¿…è€ƒè™‘ä»–ä»¬çš„ä»£ç åœ¨å“ªé‡Œè¿è¡Œæˆ–å¦‚ä½•åˆ°è¾¾é‚£é‡Œï¼Œè¿™äº›å¯¹ç”¨æˆ·éƒ½æ˜¯é€æ˜å¾—ï¼Œå› ä¸ºå¹³å°ä¼šå…³æ³¨è¿™äº›ã€‚</li></ul></li><li><p>åŸºäº API çš„åä½œ</p></li><li><p>æŠ—è„†å¼±æ€§</p></li></ul></li><li><p>äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆ2015ï¼‰å®šä¹‰çš„ç‰¹å¾</p><ul><li>åº”ç”¨å®¹å™¨åŒ–</li><li>é¢å‘å¾®æœåŠ¡æ¶æ„</li><li>åº”ç”¨æ”¯æŒå®¹å™¨çš„ç¼–æ’åˆ¶åº¦</li></ul></li><li><p>äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆ2018ï¼‰å®šä¹‰</p><ul><li>äº‘åŸç”ŸæŠ€æœ¯æœ‰åˆ©äºå„ç»„ç»‡åœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘ç­‰æ–°å‹åŠ¨æ€ç¯å¢ƒä¸­ï¼Œæ„å»ºå’Œè¿è¡Œå¯å¼¹æ€§æ‰©å±•çš„åº”ç”¨ã€‚äº‘åŸç”Ÿçš„ä»£è¡¨æŠ€æœ¯åŒ…æ‹¬å®¹å™¨ã€æœåŠ¡ç½‘æ ¼ã€å¾®æœåŠ¡ã€ä¸å¯å˜åŸºç¡€è®¾æ–½å’Œå£°æ˜å¼ API</li><li>è¿™äº›æŠ€æœ¯èƒ½å¤Ÿæ„å»ºå®¹é”™æ€§å¥½ã€æ˜“äºç®¡ç†å’Œä¾¿äºè§‚å¯Ÿçš„æ¾è€¦åˆç³»ç»Ÿã€‚ç»“åˆå¯é çš„è‡ªåŠ¨åŒ–æ‰‹æ®µï¼Œäº‘åŸç”ŸæŠ€æœ¯ä½¿å·¥ç¨‹å¸ˆèƒ½å¤Ÿè½»æ¾åœ°å¯¹ç³»ç»Ÿä½œå‡ºé¢‘ç¹å’Œå¯é¢„æµ‹çš„é‡å¤§å˜æ›´</li></ul></li></ul><h3 id="_1-2-å®¹å™¨ã€è™šæ‹Ÿæœºã€dockerã€openstack-å’Œ-k8s" tabindex="-1">1.2 å®¹å™¨ã€è™šæ‹Ÿæœºã€Dockerã€Openstack å’Œ K8S <a class="header-anchor" href="#_1-2-å®¹å™¨ã€è™šæ‹Ÿæœºã€dockerã€openstack-å’Œ-k8s" aria-label="Permalink to &quot;1.2 å®¹å™¨ã€è™šæ‹Ÿæœºã€Dockerã€Openstack å’Œ K8S&quot;">â€‹</a></h3><ul><li><strong>å®¹å™¨&amp;è™šæ‹Ÿæœº</strong>ï¼šå‡ä¸ºè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå®¹å™¨æ›´ä¸ºè½»é‡åŒ–ã€æ•ˆç‡æ›´é«˜ã€å¯åŠ¨æ›´å¿«ï¼›è™šæ‹Ÿæœºéœ€æ•°åˆ†é’Ÿå¯åŠ¨ï¼Œå®¹å™¨ä»…éœ€æ•°åæ¯«ç§’ï¼›</li><li><strong>Docker</strong>ï¼š å®¹å™¨åŒ–è™šæ‹ŸæŠ€æœ¯äº‹å®ä¸Šçš„æ ‡å‡†ï¼›</li><li><strong>OpenStack</strong>ï¼šåˆ†å¸ƒå¼çš„è™šæ‹ŸæœºæœåŠ¡å¹³å°ï¼Œç›¸æ¯”äºæ™®é€šçš„è™šæ‹Ÿæœºè½¯ä»¶ï¼ˆå¦‚Vmareï¼‰ï¼Œå¤šäº†åˆ†å¸ƒå¼è™šæ‹Ÿæœºè°ƒåº¦ç®¡ç†çš„åŠŸèƒ½å’ŒèŠ‚ç‚¹çš„è´Ÿè½½å‡è¡¡ï¼›</li><li><strong>K8S</strong>ï¼šåˆ†å¸ƒå¼çš„å®¹å™¨è°ƒåº¦ç®¡ç†å¹³å°ï¼Œç›¸æ¯”äºDockerï¼Œå¤šäº†åˆ†å¸ƒå¼çš„å®¹å™¨è°ƒåº¦ç®¡ç†å’ŒèŠ‚ç‚¹çš„è´Ÿè½½å‡è¡¡ï¼›</li><li><strong>æ³¨æ„</strong>ï¼šå¸¸è§çš„ä¸­æ–‡èµ„æ–™å‡è¨€K8Sæ˜¯å®¹å™¨ç¼–æ’è½¯ä»¶ï¼Œè¿™é‡Œçš„ç¼–æ’æ˜¯æŒ‡è°ƒåº¦ã€ç®¡ç†çš„æ„æ€ï¼Œè€Œéå·¥ä½œæµç¼–æ’çš„æ„æ€ï¼Œå®¹æ˜“æœ‰è¯¯å¯¼æ€§ï¼›</li><li><strong>æ³¨æ„</strong>ï¼šæ— è®ºæ˜¯Openstackè¿˜æ˜¯K8Sï¼Œå‡ä¸æ”¯æŒè·¨èŠ‚ç‚¹çš„å®¹å™¨æˆ–è™šæ‹Ÿæœºçš„åˆ›å»ºï¼›æ‰€ä»¥å°†å¤šå°ç”µè„‘åˆå¹¶æˆä¸€å°ç”µè„‘çš„æƒ³æ³•æ˜¯ä¸ç°å®çš„ï¼›</li></ul><h3 id="_1-3-k8s-å’Œ-äº‘åŸç”Ÿ" tabindex="-1">1.3 K8S å’Œ äº‘åŸç”Ÿ <a class="header-anchor" href="#_1-3-k8s-å’Œ-äº‘åŸç”Ÿ" aria-label="Permalink to &quot;1.3 K8S å’Œ äº‘åŸç”Ÿ&quot;">â€‹</a></h3><p>åœ¨å•æœºä¸Šè¿è¡Œå®¹å™¨ï¼Œæ— æ³•å‘æŒ¥å®ƒçš„æœ€å¤§æ•ˆèƒ½ï¼Œåªæœ‰å½¢æˆé›†ç¾¤ï¼Œæ‰èƒ½æœ€å¤§ç¨‹åº¦å‘æŒ¥å®¹å™¨çš„è‰¯å¥½éš”ç¦»ã€èµ„æºåˆ†é…ä¸ç¼–æ’ç®¡ç†çš„ä¼˜åŠ¿ï¼Œè€Œå¯¹äºå®¹å™¨çš„ç¼–æ’ç®¡ç†ï¼ŒSwarmã€Mesos å’Œ Kubernetes çš„å¤§æˆ˜å·²ç»åŸºæœ¬å®£å‘Šç»“æŸï¼ŒKubernetes æˆä¸ºäº†æ— å¯äº‰è®®çš„èµ¢å®¶ã€‚</p><ul><li>Kubernetes æˆä¸ºäº‘åŸç”Ÿåº”ç”¨çš„åŸºçŸ³</li><li>æœ‰æœºä¼šæˆä¸ºè·¨äº‘çš„çœŸæ­£çš„äº‘åŸç”Ÿåº”ç”¨çš„æ“ä½œç³»ç»Ÿ</li></ul><h3 id="_1-4-k8s-ä»‹ç»" tabindex="-1">1.4 K8S ä»‹ç» <a class="header-anchor" href="#_1-4-k8s-ä»‹ç»" aria-label="Permalink to &quot;1.4 K8S ä»‹ç»&quot;">â€‹</a></h3><ul><li><strong>å®˜æ–¹</strong>ï¼š<strong>Kubernetes</strong> ä¹Ÿç§°ä¸º <strong>K8S</strong>ï¼Œæ˜¯ç”¨äºè‡ªåŠ¨éƒ¨ç½²ã€æ‰©ç¼©å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„å¼€æºç³»ç»Ÿã€‚</li><li><strong>å‘å±•å†å²</strong>ï¼šç”±<strong>Google</strong>è®¾è®¡å¹¶æèµ ç»™<strong>Cloud Native Computing Foundation</strong>ï¼ˆä»Šå±<strong>Linux</strong>åŸºé‡‘ä¼šï¼‰æ¥ä½¿ç”¨ã€‚</li><li><strong>èƒ½åŠ›</strong>ï¼š<strong>Google</strong> æ¯å‘¨è¿è¡Œæ•°åäº¿ä¸ªå®¹å™¨ï¼Œèƒ½å¤Ÿåœ¨ä¸æ‰©å¼ è¿ç»´å›¢é˜Ÿçš„æƒ…å†µä¸‹è¿›è¡Œè§„æ¨¡æ‰©å±•ã€‚</li><li><strong>ä½œç”¨</strong>ï¼š ç›¸å½“äºä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œå¯ä»¥å¿«é€Ÿæä¾›<strong>PaaS</strong>æœåŠ¡ï¼š1ï¼‰åˆ›å»ºå„ç§å®¹å™¨åŒ–æµ‹è¯•åŒ–ç¯å¢ƒï¼›2ï¼‰å‘å¸ƒå„ç§å®¹å™¨åŒ–æœåŠ¡ï¼›3ï¼‰å¿«é€Ÿå®‰è£…å„ç§å®¹å™¨åŒ–æœåŠ¡ï¼Œå¦‚MongoDBã€<strong>Hbase</strong>ã€<strong>Postgresql</strong>ã€<strong>Redis</strong>ã€<strong>Spark</strong>ç­‰ï¼›å¿«é€Ÿæä¾›IaaSæœåŠ¡ï¼šé€šè¿‡å®‰è£…<strong>Openstack</strong>æˆ–<strong>KubeVirt</strong>ç­‰è½¯ä»¶ï¼›å¿«é€Ÿæä¾›<strong>FaaS</strong>æœåŠ¡ï¼šé€šè¿‡å®‰è£…<strong>Kube</strong> <strong>Native</strong>ç­‰è½¯ä»¶ï¼›</li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230414170948460.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230414170948460.png</a></p><p>image-20230414170948460</p><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230414171119324.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230414171119324.png</a></p><p>image-20230414171119324</p><h3 id="_1-5-åŸºæœ¬æ¦‚å¿µ" tabindex="-1">1.5 åŸºæœ¬æ¦‚å¿µ <a class="header-anchor" href="#_1-5-åŸºæœ¬æ¦‚å¿µ" aria-label="Permalink to &quot;1.5 åŸºæœ¬æ¦‚å¿µ&quot;">â€‹</a></h3><ul><li><strong>Container</strong>ï¼šè½»é‡çº§çš„ç³»ç»Ÿè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä½¿ç”¨namespaceéš”ç¦»ç¯å¢ƒã€‚</li><li><strong>Pod</strong>ï¼š<strong>K8S</strong> çš„è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œ<strong>Pod</strong>æ˜¯ä¸€ç»„ç´§å¯†å…³è”çš„å®¹å™¨é›†åˆï¼Œå†…éƒ¨çš„å®¹å™¨å…±äº«PIDã€IPCã€Networkå’ŒUTS namespaceã€‚å¯ä»¥é€šè¿‡è¿›ç¨‹é—´é€šä¿¡å’Œæ–‡ä»¶å…±äº«è¿™ç§ç®€å•é«˜æ•ˆçš„æ–¹å¼ç»„åˆå®ŒæˆæœåŠ¡ã€‚</li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230415141540422.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230415141540422.png</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>    Podçš„è®¾è®¡ç†å¿µåŸºç¡€æ˜¯å¾®æœåŠ¡ï¼Œä¸åŒç±»å‹çš„ä¸šåŠ¡ç»„åˆç”±ä¸åŒç±»å‹çš„Podæ‰§è¡Œï¼Œä¸€ä¸ªPodå¯¹åº”ä¸€ä¸ªå¾®æœåŠ¡</span></span></code></pre></div><ul><li><p><strong>Node:</strong> æ˜¯Podè¿è¡Œçš„ä¸»æœºï¼Œå¯ä»¥ä¸ºç‰©ç†æœºï¼Œä¹Ÿå¯ä»¥ä¸ºè™šæ‹Ÿæœºã€‚æ¯ä¸ªNodeä¸Šè¦è¿è¡Œcontainer runtime ï¼ˆdockeræˆ–è€…rktï¼‰ã€kubeletå’Œkube-proxyæœåŠ¡</p><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230415142123300.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230415142123300.png</a></p></li><li><p><strong>Service:</strong> ä¸€ä¸ªPodåªæ˜¯ä¸€ä¸ªè¿è¡ŒæœåŠ¡çš„å®ä¾‹ï¼Œå¯èƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šåœæ­¢ï¼Œåœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä»¥ä¸€ä¸ªæ–°çš„IPå¯åŠ¨ä¸€ä¸ªæ–°çš„Podã€‚åœ¨K8Sé›†ç¾¤ä¸­ï¼Œå®¢æˆ·ç«¯éœ€è¦è®¿é—®çš„æœåŠ¡å°±æ˜¯Serviceå¯¹è±¡ã€‚æ¯ä¸ªServiceä¼šå¯¹åº”ä¸€ä¸ªé›†ç¾¤å†…éƒ¨æœ‰æ•ˆçš„è™šæ‹ŸIPï¼Œé›†ç¾¤å†…éƒ¨é€šè¿‡è™šæ‹ŸIPè®¿é—®ä¸€ä¸ªæœåŠ¡ã€‚</p></li><li><p><strong>Kubelet:</strong> æ¯ä¸ªNodeçš„ä»»åŠ¡å’Œèµ„æºç®¡ç†</p></li><li><p><strong>Kube-proxy:</strong> è´Ÿè´£æ¯ä¸ªèŠ‚ç‚¹çš„ç¡¬ä»¶è´Ÿè½½å‡è¡¡</p></li></ul><h3 id="_1-6-k8s-å¸¸è§å‘½ä»¤" tabindex="-1">1.6 K8S å¸¸è§å‘½ä»¤ <a class="header-anchor" href="#_1-6-k8s-å¸¸è§å‘½ä»¤" aria-label="Permalink to &quot;1.6 K8S å¸¸è§å‘½ä»¤&quot;">â€‹</a></h3><ul><li><p>è¿è¡Œä¸€ä¸ªNginixå®¹å™¨ï¼š</p><ul><li><code>kubectl run --image=nginx:alpine nginx-app --port=80</code></li></ul></li><li><p>Kubectl å‘½ä»¤ï¼š</p><ul><li><code>kubectl get - ç±»ä¼¼äº docker psï¼ŒæŸ¥è¯¢èµ„æºåˆ—è¡¨</code></li><li><code>kubectl describe - ç±»ä¼¼äº docker inspectï¼Œè·å–èµ„æºçš„è¯¦ç»†ä¿¡æ¯</code></li><li><code>kubectl logs - ç±»ä¼¼äº docker logsï¼Œè·å–å®¹å™¨çš„æ—¥å¿—</code></li><li><code>kubectl exec - ç±»ä¼¼äº docker execï¼Œåœ¨å®¹å™¨å†…æ‰§è¡Œä¸€ä¸ªå‘½ä»¤</code></li><li><code>kubectl create -f file.yaml â€“ æ ¹æ®yamlåˆ›å»ºDeploymentèµ„æº</code></li><li><code>kubectl delete åˆ é™¤å‘½ä»¤ï¼Œå¯åˆ é™¤nodeã€podã€svcã€depolyment</code></li></ul></li><li><p>Volumeï¼š</p><ul><li>ä¸€ä¸ª<strong>Pod</strong>ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œ<strong>Pod</strong> äº§ç”Ÿçš„æ•°æ®ä¼šéšç€ <strong>Pod</strong> æ¶ˆäº¡è€Œè‡ªåŠ¨æ¶ˆå¤±ã€‚<strong>Volume</strong> ç”¨äºæŒä¹…åŒ–å®¹å™¨æ•°æ®ã€‚</li><li>å¦‚ï¼šä¸º <strong>redis</strong> å®¹å™¨æŒ‡å®šä¸€ä¸ª <strong>hostPath</strong> æ¥å­˜å‚¨ <strong>redis</strong> æ•°æ®</li></ul></li><li><p>Serviceï¼š</p><ul><li><p>kubectlåˆ›å»ºPodï¼ŒPobçš„IPåœ°å€ä¼šéšç€Podçš„é‡å¯è€Œå˜åŒ–</p></li><li><p>ä¸ºäº†è®¿é—®Podæä¾›çš„æœåŠ¡ï¼Œé‡‡ç”¨Serviceæä¾›ä¸ºä¸€ç»„Podä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ï¼Œå¹¶æä¾›è´Ÿè½½å‡è¡¡å’Œ</p><p>è‡ªåŠ¨æœåŠ¡å‘ç°</p><p>ã€‚</p><ul><li><code>kubectl expose deployment nginx-app --port=80 --target-port=80 --type=NodePort</code></li></ul></li></ul></li><li><p>Replicas setï¼š</p><ul><li>åœ¨ä¸€ä¸ªServiceä¸­,å¯ä¸ºPodè®¾ç½®æ•°ä¸ªå‰¯æœ¬ï¼Œä»¥ç¡®ä¿æœåŠ¡æ°¸ä¸æ‰çº¿ <ul><li><code>kubectl scale --replicas=3 deployment/nginx-app</code></li></ul></li></ul></li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230415143046325.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230415143046325.png</a></p><ul><li>æ»šåŠ¨å‡çº§ï¼ˆRolling Updateï¼‰ï¼š <ul><li>æ»šåŠ¨å‡çº§ï¼ˆRolling Updateï¼‰é€šè¿‡é€ä¸ªå‰¯æœ¬å®¹å™¨æ›¿ä»£å‡çº§çš„æ–¹å¼æ¥å®ç°æ— ä¸­æ–­çš„æœåŠ¡å‡çº§ï¼š <ul><li><code>kubectl rolling-update frontend-v1 frontend-v2 --image=image:v2</code></li></ul></li><li>æ»šåŠ¨å‡çº§ä¸­è‹¥å‘ç”Ÿé”™è¯¯ï¼Œå¯éšæ—¶å›æ»šï¼š <ul><li><code>kubectl rolling-update frontend-v1 frontend-v2 --rollback</code></li></ul></li></ul></li><li>èµ„æºé™åˆ¶ï¼š <ul><li>K8Sé€šè¿‡ cgroups æä¾›å®¹å™¨èµ„æºç®¡ç†çš„åŠŸèƒ½ï¼Œå¯é™åˆ¶æ¯ä¸ªå®¹å™¨çš„ CPU å’Œå†…å­˜ä½¿ç”¨ï¼Œæ¯”å¦‚å¯¹äºåˆšæ‰åˆ›å»ºçš„ deploymentï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤é™åˆ¶ nginx å®¹å™¨æœ€å¤šåªç”¨ 50% çš„ CPU å’Œ 128MB çš„å†…å­˜ï¼š <ul><li><code>kubectl set resources deployment nginx-app -c=nginx --limits=cpu=500m,memory=128Mi</code></li></ul></li><li>æˆ–è€…åœ¨yamlä¸­æŒ‡å®šèµ„æºé™åˆ¶</li></ul></li><li>å¥åº·æ£€æŸ¥ï¼š <ul><li>K8S Kubernetes æä¾›äº†ä¸¤ç§æ¢é’ˆï¼ˆProbeï¼Œæ”¯æŒ execã€tcpSocket å’Œ http æ–¹å¼ï¼‰æ¥æ¢æµ‹å®¹å™¨çš„çŠ¶æ€ï¼š <ul><li>LivenessProbeï¼šæ¢æµ‹åº”ç”¨æ˜¯å¦å¤„äºå¥åº·çŠ¶æ€ï¼Œå¦‚æœä¸å¥åº·åˆ™åˆ é™¤å¹¶é‡æ–°åˆ›å»ºå®¹å™¨</li><li>ReadinessProbeï¼šæ¢æµ‹åº”ç”¨æ˜¯å¦å¯åŠ¨å®Œæˆå¹¶ä¸”å¤„äºæ­£å¸¸æœåŠ¡çŠ¶æ€ï¼Œå¦‚æœä¸æ­£å¸¸åˆ™ä¸ä¼šæ¥æ”¶æ¥è‡ª Kubernetes Service çš„æµé‡</li></ul></li></ul></li></ul><h3 id="_1-7-k8s-å¸¸ç”¨è¿ç»´å‘½ä»¤" tabindex="-1">1.7 K8S å¸¸ç”¨è¿ç»´å‘½ä»¤ <a class="header-anchor" href="#_1-7-k8s-å¸¸ç”¨è¿ç»´å‘½ä»¤" aria-label="Permalink to &quot;1.7 K8S å¸¸ç”¨è¿ç»´å‘½ä»¤&quot;">â€‹</a></h3><ul><li>æŸ¥çœ‹podï¼ŒåŠæ‰€åœ¨çš„èŠ‚ç‚¹ï¼š <ul><li><code>kubectl get pods -o wide</code></li></ul></li><li>æŸ¥çœ‹podè¿è¡ŒçŠ¶æ€ <ul><li>kubectl describe pod -n xxx podname</li><li>kubectl logs -n xxx podname</li></ul></li><li>æ‹‰å–imageå¤±è´¥ <ul><li>ä½¿ç”¨é•œåƒï¼š <a href="http://xn--yamldocker-yt2pu689a.xn--iom-e88du92cl4n83f.daocloud.io/docker.io" target="_blank" rel="noreferrer">yamlä¸­çš„docker.ioæ›¿æ¢ä¸ºå¦‚m.daocloud.io/docker.io</a></li></ul></li><li><strong>è‹¥æœ‰èŠ‚ç‚¹warnï¼Œå›æ”¶åƒåœ¾å¤±è´¥ï¼š</strong></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> drain</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --delete-local-data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ignore-daemonsets</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NODENAME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uncordon</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NODENAME</span></span></code></pre></div><h2 id="_2-k8s-é›†ç¾¤åŸºç¡€ç¯å¢ƒéƒ¨ç½²" tabindex="-1">2 K8S é›†ç¾¤åŸºç¡€ç¯å¢ƒéƒ¨ç½² <a class="header-anchor" href="#_2-k8s-é›†ç¾¤åŸºç¡€ç¯å¢ƒéƒ¨ç½²" aria-label="Permalink to &quot;2 K8S é›†ç¾¤åŸºç¡€ç¯å¢ƒéƒ¨ç½²&quot;">â€‹</a></h2><h3 id="_2-1-æœåŠ¡å™¨" tabindex="-1">2.1 æœåŠ¡å™¨ <a class="header-anchor" href="#_2-1-æœåŠ¡å™¨" aria-label="Permalink to &quot;2.1 æœåŠ¡å™¨&quot;">â€‹</a></h3><ul><li>**ç½‘ç»œèµ„æºï¼š**å­ç½‘è¶Šç‰›è¶Šå¥½ï¼Œæœ€ä½åº”ä¸ºä¸‡å…†</li><li>ç®¡ç†èŠ‚ç‚¹ï¼š <ul><li>yudayu-2 (223.2.47.148)</li></ul></li><li>è®¡ç®—èŠ‚ç‚¹ï¼š <ul><li>yudayu-1 (223.2.47.229)</li></ul></li><li>æŒä¹…åŒ–å­˜å‚¨èµ„æºï¼š <ul><li>æš‚æ— ï¼šå»ºè®®NFS</li></ul></li></ul><h3 id="_2-2-å®‰è£…è¿‡ç¨‹" tabindex="-1">2.2 å®‰è£…è¿‡ç¨‹ <a class="header-anchor" href="#_2-2-å®‰è£…è¿‡ç¨‹" aria-label="Permalink to &quot;2.2 å®‰è£…è¿‡ç¨‹&quot;">â€‹</a></h3><h3 id="_2-2-1-å‰ææ¡ä»¶" tabindex="-1">2.2.1 å‰ææ¡ä»¶ <a class="header-anchor" href="#_2-2-1-å‰ææ¡ä»¶" aria-label="Permalink to &quot;2.2.1 å‰ææ¡ä»¶&quot;">â€‹</a></h3><ol><li>èŠ‚ç‚¹ä¹‹ä¸­ä¸å¯ä»¥æœ‰é‡å¤çš„ä¸»æœºåã€<code>MAC</code> åœ°å€æˆ– <code>product_uuid</code></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /sys/class/dmi/id/product_uuid</span></span></code></pre></div><ol><li>æ£€æŸ¥ç½‘ç»œé€‚é…å™¨ï¼šè‹¥æœ‰å¤šä¸ªç½‘å¡ï¼Œç¡®ä¿æ¯ä¸ªnodeçš„å­ç½‘é€šè¿‡é»˜è®¤è·¯ç”±å¯è¾¾</li><li>é˜²ç«å¢™å¼€æ”¾ç«¯å£(æ‰€æœ‰èŠ‚ç‚¹)</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=443/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=6443/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=2379-2380/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=10250/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=10259/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=10257/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=10256/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-port=30000-32767/tcp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span></span></code></pre></div><ol><li>å…³é—­é˜²ç«å¢™(æ‰€æœ‰èŠ‚ç‚¹ï¼‰â€”â€” é¦–é€‰</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre></div><ol><li>ç¦ç”¨swap</li></ol><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vim </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fstab</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mapper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> swap     none                    swap    defaults ï¼ˆæ³¨é‡Šè¿™è¡Œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æŸ¥çœ‹å¹¶åœæ­¢ä½¿ç”¨å½“å‰swap</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">swapon </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">swapoff </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span></code></pre></div><h3 id="_2-2-2-å‡çº§-linux-å†…æ ¸åˆ°5" tabindex="-1">2.2.2 å‡çº§ Linux å†…æ ¸åˆ°5+ï¼š <a class="header-anchor" href="#_2-2-2-å‡çº§-linux-å†…æ ¸åˆ°5" aria-label="Permalink to &quot;2.2.2 å‡çº§ Linux å†…æ ¸åˆ°5+ï¼š&quot;">â€‹</a></h3><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yum makecache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> yum </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y update</span></span></code></pre></div><h3 id="_2-2-3-å®‰è£…container-runtime-é€‰ç”¨containerd" tabindex="-1">2.2.3 å®‰è£…Container Runtime(é€‰ç”¨containerd)ï¼š <a class="header-anchor" href="#_2-2-3-å®‰è£…container-runtime-é€‰ç”¨containerd" aria-label="Permalink to &quot;2.2.3 å®‰è£…Container Runtime(é€‰ç”¨containerd)ï¼š&quot;">â€‹</a></h3><ul><li><strong>Docker-engine+cir-dockerdæ–¹æ¡ˆï¼ˆèˆå¼ƒï¼‰</strong>ï¼šä»kubernetes 1.24å¼€å§‹ï¼Œdockershimå·²ç»ä»kubeletä¸­ç§»é™¤ï¼Œä½†å› ä¸ºå†å²é—®é¢˜dockerå´ä¸æ”¯æŒkubernetesä¸»æ¨çš„CRIï¼ˆå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼‰æ ‡å‡†ï¼Œéœ€è¦åœ¨kubeletå’Œdockerä¹‹é—´åŠ ä¸Šä¸€ä¸ªä¸­é—´å±‚cri-dockerã€‚cri-dockeræ˜¯ä¸€ä¸ªæ”¯æŒCRIæ ‡å‡†çš„shimã€‚ä¸€å¤´é€šè¿‡CRIè·Ÿkubeletäº¤äº’ï¼Œå¦ä¸€å¤´è·Ÿdocker apiäº¤äº’ï¼Œä»è€Œé—´æ¥çš„å®ç°äº†kubernetesä»¥dockerä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ã€‚ä½†æ˜¯è¿™ç§æ¶æ„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œ<strong>è°ƒç”¨é“¾æ›´é•¿ï¼Œæ•ˆç‡æ›´ä½</strong>ã€‚å› æ­¤é€‰ç”¨containerdä½œä¸ºå®¹å™¨runtime</li><li><strong>containerd</strong>æ–¹æ¡ˆ: <strong>containerd</strong>æ˜¯ä¸€ä¸ª<strong>docker</strong>çš„å®¹å™¨<strong>runtime</strong>ï¼Œæˆä¸º<strong>CNCF</strong>çš„å®˜æ–¹é¡¹ç›®</li></ul><p>å®˜æ–¹å®‰è£…æ•™ç¨‹ï¼š<a href="https://github.com/containerd/containerd/blob/main/docs/getting-started.md" target="_blank" rel="noreferrer">https://github.com/containerd/containerd/blob/main/docs/getting-started.md</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># **è£…containerd**</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum-utils</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd.io</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">containerd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/containerd/config.toml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># **å®‰è£…CNIæ’ä»¶**ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸‹è½½cni-plugins.tar ä»https://github.com/containernetworking/plugins/releases</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨/opt/cni/binä¸‹è§£å‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/cni/bin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cxzvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/cni/bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cni-plugins-linux-amd64-v1.1.1.tgz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/containerd/config.toml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># disabled_plugins = [&quot;cri&quot;] ä¸­ç§»é™¤cri</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd</span></span></code></pre></div><h3 id="_2-2-4-é…ç½®systemd-cgroupé©±åŠ¨-for-container-runtime" tabindex="-1">2.2.4 <strong>é…ç½®systemd cgroupé©±åŠ¨ for container runtime</strong> <a class="header-anchor" href="#_2-2-4-é…ç½®systemd-cgroupé©±åŠ¨-for-container-runtime" aria-label="Permalink to &quot;2.2.4  **é…ç½®systemd cgroupé©±åŠ¨ for container runtime**&quot;">â€‹</a></h3><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vim </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">containerd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.toml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[plugins.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.containerd.grpc.v1.cri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.containerd.runtimes.runc]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [plugins.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.containerd.grpc.v1.cri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.containerd.runtimes.runc.options]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SystemdCgroup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sudo sed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;s#SystemdCgroup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> false#SystemdCgroup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> true#g&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">containerd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.toml</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">containerd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.toml </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> grep SystemdCgroup</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># ä¿®æ”¹sandboxé•œåƒåœ¨config.tomlä¸­</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sandbox_image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;registry.aliyuncs.com/google_containers/pause:3.9&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">****</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">systemctl restart containerd</span></span></code></pre></div><h3 id="_2-2-5-å®‰è£…-kubeadm-kubelet-and-kubectl-æ‰€æœ‰èŠ‚ç‚¹" tabindex="-1">2.2.5 å®‰è£… kubeadm, kubelet and kubectlï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰ <a class="header-anchor" href="#_2-2-5-å®‰è£…-kubeadm-kubelet-and-kubectl-æ‰€æœ‰èŠ‚ç‚¹" aria-label="Permalink to &quot;2.2.5 å®‰è£… kubeadm, kubelet and kubectlï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># ç™»å½•æ ¡å›­ç½‘ï¼š</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://portal.njnu.edu.cn/portal_io/logi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;username=lszh2021060810&amp;password=20210608cm&amp;submitBtn=&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–è€…ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -G</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://172.28.255.156:801/eportal/portal/login&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --data-urlencode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;callback=dr1003&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --data-urlencode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;login_method=1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --data-urlencode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;user_account=Temp.dky.model2&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --data-urlencode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;user_password=Temp_dky@model2.nnu&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># å°† SELinux è®¾ç½®ä¸º permissive æ¨¡å¼ï¼ˆç›¸å½“äºå°†å…¶ç¦ç”¨ï¼‰</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setenforce</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/^SELINUX=enforcing$/SELINUX=permissive/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/selinux/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[kubernetes]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">name=Kubernetes</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">baseurl=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.30/rpm/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">enabled=1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gpgcheck=1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gpgkey=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.30/rpm/repodata/repomd.xml.key</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nogpgcheck</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  kubelet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubelet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubelet</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># åˆ é™¤é˜²æ­¢æ›´æ–°ï¼š</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># æ£€æŸ¥ç‰ˆæœ¬</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubelet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># é…ç½®å®¹å™¨è¿è¡Œæ—¶ï¼Œä»¥ä¾¿åç»­é€šè¿‡crictlç®¡ç† é›†ç¾¤å†…çš„å®¹å™¨å’Œé•œåƒ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crictl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runtime-endpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unix:///var/run/containerd/containerd.sock</span></span></code></pre></div><h3 id="_2-2-6-è½¬å‘ipv4" tabindex="-1">2.2.6 è½¬å‘ipv4 <a class="header-anchor" href="#_2-2-6-è½¬å‘ipv4" aria-label="Permalink to &quot;2.2.6 è½¬å‘ipv4&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.conf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vm.swappiness=0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vm.overcommit_memory=1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vm.panic_on_oom=0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">fs.inotify.max_user_watches=89100</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/modules-load.d/k8s.conf</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">overlay</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">br_netfilter</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.d/k8s.conf</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">net.bridge.bridge-nf-call-ip6tables = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">net.ipv4.ip_forward                 = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">net.bridge.bridge-nf-call-iptables = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">net.ipv4.conf.default.rp_filter=1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">net.ipv4.conf.all.rp_filter=1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --system</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç”Ÿæ•ˆ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŠ è½½å†…æ ¸æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">modprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> br_netfilter</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ç½‘ç»œæ¡¥æ¥æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">modprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> overlay</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è”åˆæ–‡ä»¶ç³»ç»Ÿæ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsmod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> br_netfilter</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> overlay</span></span></code></pre></div><h3 id="_2-2-7-å¯åŠ¨é›†ç¾¤" tabindex="-1">2.2.7 å¯åŠ¨é›†ç¾¤ <a class="header-anchor" href="#_2-2-7-å¯åŠ¨é›†ç¾¤" aria-label="Permalink to &quot;2.2.7 å¯åŠ¨é›†ç¾¤&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æå‰æ‹‰å–éœ€è¦çš„image</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> images</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --image-repository</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> registry.aliyuncs.com/google_containers</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹æ‹‰å–çš„é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crictl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> images</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                            </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆå§‹åŒ–é›†ç¾¤</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --apiserver-advertise-address æŒ‡å®š Kubernetes API Server çš„å®£å‘Šåœ°å€ï¼Œå¯ä»¥ä¸è®¾ç½®è®©å…¶è‡ªåŠ¨æ£€æµ‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¶ä»–èŠ‚ç‚¹å’Œå®¢æˆ·ç«¯å°†ä½¿ç”¨æ­¤åœ°å€è¿æ¥åˆ° API Server</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --image-repository æŒ‡å®šäº† Docker é•œåƒçš„ä»“åº“åœ°å€ï¼Œç”¨äºä¸‹è½½ Kubernetes ç»„ä»¶æ‰€éœ€çš„å®¹å™¨é•œåƒã€‚åœ¨è¿™é‡Œï¼Œä½¿ç”¨äº†é˜¿é‡Œäº‘å®¹å™¨é•œåƒåœ°å€ï¼Œå¯ä»¥åŠ é€Ÿé•œåƒçš„ä¸‹è½½ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --service-cidr æŒ‡å®š Kubernetes é›†ç¾¤ä¸­ Service çš„ IP åœ°å€èŒƒå›´ï¼ŒService IP åœ°å€å°†åˆ†é…ç»™ Kubernetes Serviceï¼Œä»¥å…è®¸å®ƒä»¬åœ¨é›†ç¾¤å†…é€šä¿¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># --pod-network-cidr æŒ‡å®š Kubernetes é›†ç¾¤ä¸­ Pod ç½‘ç»œçš„ IP åœ°å€èŒƒå›´ã€‚Pod IP åœ°å€å°†åˆ†é…ç»™å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åº Podï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥ç›¸äº’é€šä¿¡ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--image-repository </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">registry.aliyuncs.com/google_containers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--kubernetes-version </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.30.3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--service-cidr=20.1.0.0/16 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--pod-network-cidr=55.2.0.0/16</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># worker nodeåŠ å…¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --print-join-command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yudayu-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node-role.kubernetes.io/worker=worker</span></span></code></pre></div><h3 id="_2-2-8-é…ç½®kubectlå˜é‡" tabindex="-1">2.2.8 é…ç½®kubectlå˜é‡ <a class="header-anchor" href="#_2-2-8-é…ç½®kubectlå˜é‡" aria-label="Permalink to &quot;2.2.8 é…ç½®kubectlå˜é‡&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/.kube</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/kubernetes/admin.conf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/.kube/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) $HOME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/.kube/config</span></span></code></pre></div><h3 id="_2-2-10-å°†-master-ä½œä¸ºnode-ç®¡ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œ" tabindex="-1">2.2.10 å°† master ä½œä¸ºnodeï¼ˆç®¡ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼‰ <a class="header-anchor" href="#_2-2-10-å°†-master-ä½œä¸ºnode-ç®¡ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œ" aria-label="Permalink to &quot;2.2.10 å°† master ä½œä¸ºnodeï¼ˆç®¡ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼‰&quot;">â€‹</a></h3><ul><li>æ£€æŸ¥ node æ˜¯å¦å­˜åœ¨æ±¡ç‚¹ï¼Œåˆ é™¤æ±¡ç‚¹ <ul><li>æ±¡ç‚¹å€¼æœ‰ä¸‰ç§ï¼š <ul><li>NoScheduleï¼šä¸€å®šä¸è¢«è°ƒåº¦</li><li>PreferNoScheduleï¼šå°½é‡ä¸è¢«è°ƒåº¦ã€ä¹Ÿæœ‰è¢«è°ƒåº¦çš„å‡ ç‡ã€‘</li><li>NoExecuteï¼šä¸ä¼šè°ƒåº¦ï¼Œå¹¶ä¸”è¿˜ä¼šé©±é€Nodeå·²æœ‰Pod</li></ul></li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> describe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Taints</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> taint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node-role.kubernetes.io/control-plane-</span></span></code></pre></div><h3 id="_2-2-9-å®‰è£…-pod-ç½‘ç»œæ’ä»¶-cni-container-network-interface-master" tabindex="-1">2.2.9 å®‰è£… Pod ç½‘ç»œæ’ä»¶ï¼ˆCNIï¼šContainer Network Interfaceï¼‰(master) <a class="header-anchor" href="#_2-2-9-å®‰è£…-pod-ç½‘ç»œæ’ä»¶-cni-container-network-interface-master" aria-label="Permalink to &quot;2.2.9 å®‰è£… Pod ç½‘ç»œæ’ä»¶ï¼ˆCNIï¼šContainer Network Interfaceï¼‰(master)&quot;">â€‹</a></h3><p>ä½ å¿…é¡»éƒ¨ç½²ä¸€ä¸ªåŸºäº Pod ç½‘ç»œæ’ä»¶çš„ å®¹å™¨ç½‘ç»œæ¥å£ (CNI)ï¼Œä»¥ä¾¿ä½ çš„ Pod å¯ä»¥ç›¸äº’é€šä¿¡ã€‚</p><ul><li>ä¸‹è½½ <strong>yml</strong> é…ç½®æ–‡ä»¶</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.ym</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span></span></code></pre></div><ul><li>ç¼–è¾‘<strong>kube-flannel.ymlï¼Œä¿®æ”¹å­ç½‘</strong> <strong>10.244.0.0/16</strong> <strong>ä¸º</strong> 55.2.0.0/16</li><li>æ‰¾åˆ°å¦‚ä¸‹ä½ç½®ï¼Œæ·»åŠ  - --iface-regex=^192.168..</li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230408114839608.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230408114839608.png</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kube-flannel.yml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‹‰å–é•œåƒå¤±è´¥ï¼Œåˆ™å°†yamlä¸­ï¼Œæ›¿æ¢docker.ioä¸ºm.daocloud.io/docker.io</span></span></code></pre></div><h2 id="_3-dashboard-ä»ªè¡¨ç›˜" tabindex="-1">3 dashboard ä»ªè¡¨ç›˜ <a class="header-anchor" href="#_3-dashboard-ä»ªè¡¨ç›˜" aria-label="Permalink to &quot;3  dashboard ä»ªè¡¨ç›˜&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add kubernetes-dashboard repository</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://kubernetes.github.io/dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard/kubernetes-dashboard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> â€“untar</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> values.yaml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›¿æ¢ä»“åº“docker.ioä¸ºé•œåƒå¦‚ï¼Œm.daocloud.io/docker.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./kubernetes-dashboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --create-namespace</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> edit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†å…¶ä¸­çš„ï¼Œtype: ClusterIPä¿®æ”¹æˆtype: NodePortï¼Œä¿å­˜é€€å‡ºå³å¯ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -A</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æƒé™è®¤è¯ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://kuboard.cn/install-script/k8s-dashboard/auth.yam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes-dashboard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin-user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#è¿‡æœŸäº†ï¼Œé‡æ–°è¿è¡Œä¸Šå¥å‘½ä»¤å¾—åˆ°key</span></span></code></pre></div><h2 id="_4-åŒ…ç®¡ç†å·¥å…·helm" tabindex="-1">4 åŒ…ç®¡ç†å·¥å…·Helm <a class="header-anchor" href="#_4-åŒ…ç®¡ç†å·¥å…·helm" aria-label="Permalink to &quot;4 åŒ…ç®¡ç†å·¥å…·Helm&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -fsSL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get_helm.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">3&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 700</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get_helm.sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./get_helm.sh</span></span></code></pre></div><h2 id="_6-ä¸º-k8s-åˆ›å»º-pv-æŒä¹…å·" tabindex="-1">6 ä¸º K8S åˆ›å»º PV æŒä¹…å· <a class="header-anchor" href="#_6-ä¸º-k8s-åˆ›å»º-pv-æŒä¹…å·" aria-label="Permalink to &quot;6 ä¸º K8S åˆ›å»º PV æŒä¹…å·&quot;">â€‹</a></h2><h3 id="_6-1-pvå’Œpvc" tabindex="-1">6.1 PVå’ŒPVC <a class="header-anchor" href="#_6-1-pvå’Œpvc" aria-label="Permalink to &quot;6.1 PVå’ŒPVC&quot;">â€‹</a></h3><ul><li>æŒä¹…å·(PersistentVolumeï¼ŒPV)æ˜¯é›†ç¾¤ä¸­ç”±ç®¡ç†å‘˜é…ç½®çš„ä¸€æ®µç½‘ç»œå­˜å‚¨ã€‚å®ƒæ˜¯é›†ç¾¤ä¸­çš„èµ„æºï¼Œå°±åƒèŠ‚ç‚¹æ˜¯é›†ç¾¤èµ„æºä¸€æ ·ã€‚PVæŒä¹…å·å’Œæ™®é€šçš„Volumeä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å·æ’ä»¶æ¥å®ç°çš„ï¼Œåªæ˜¯å®ƒä»¬æ‹¥æœ‰ç‹¬ç«‹äºä»»ä½•ä½¿ç”¨PVçš„Podçš„ç”Ÿå‘½å‘¨æœŸã€‚æ­¤APIå¯¹è±¡æ•è·å­˜å‚¨å®ç°çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬NFSï¼ŒiSCSIæˆ–ç‰¹å®šäºäº‘æä¾›ç¨‹åºçš„å­˜å‚¨ç³»ç»Ÿã€‚</li><li>æŒä¹…å·ç”³é¢†(PersistentVolumeClaimï¼ŒPVC)è¡¨è¾¾çš„æ˜¯ç”¨æˆ·å¯¹å­˜å‚¨çš„è¯·æ±‚ã€‚æ¦‚å¿µä¸Šä¸Podç±»ä¼¼ã€‚Podä¼šè€—ç”¨èŠ‚ç‚¹èµ„æºï¼Œè€ŒPVCç”³é¢†ä¼šè€—ç”¨PVèµ„æºã€‚</li></ul><h3 id="_6-2-ç”¨-storageclass-åŠ¨æ€åˆ›å»º-pv" tabindex="-1">6.2 ç”¨ storageClass åŠ¨æ€åˆ›å»º PV <a class="header-anchor" href="#_6-2-ç”¨-storageclass-åŠ¨æ€åˆ›å»º-pv" aria-label="Permalink to &quot;6.2 ç”¨ storageClass åŠ¨æ€åˆ›å»º PV&quot;">â€‹</a></h3><ul><li>å¯¹1PBçš„å¤§é‡ç›®å½•åˆ›å»ºNFSæœåŠ¡ï¼Œgisweb1-4ï¼Œä»¥gisweb4ä¸ºä¾‹å­</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">å®‰è£…NFS:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-utils</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpcbind</span></span></code></pre></div><ul><li>è®¾ç½®æŒä¹…å·æƒé™</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰§è¡Œæƒé™chown -R nobody:nfsnobody /mnt/storage/k8s/pv</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#chmod -R 777 /mnt/storage/k8s/pv</span></span></code></pre></div><ul><li>é…ç½® nfs</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/exports</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ ï¼š/mnt/storage/k8s/pv 192.168.0.0/24(rw,sync,no_root_squash)# ä»¥ä¸Šè®¾ç½®è®©æ‰€æœ‰çš„ IP éƒ½æœ‰æ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpcbind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpcbind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permanent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-service=nfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall-cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --reloadsystemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre></div><ul><li>æ£€æŸ¥</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exportfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rvshowmount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 127.0.0.1</span></span></code></pre></div><ul><li>æ‰€æœ‰èŠ‚ç‚¹å®‰è£…nfså®¢æˆ·ç«¯</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-utils</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¯ä¸ªèŠ‚ç‚¹æŒ‚è½½nfså®¢æˆ·ç«¯çš„å­˜å‚¨ç›®å½•ï¼Œæœ¬æ¬¡nfså®¢æˆ·ç«¯åœ¨gisweb4ï¼ˆ192.168.0.204ï¼‰ä¸Šmount -t nfs 192.168.0.204:/mnt/storage/k8s/pv /mnt/storage/k8s/pv</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥æŒ‚è½½æƒ…å†µdf -h</span></span></code></pre></div><ul><li>å®‰è£…nfs-client-provisioner (éœ€è¦ç¿»å¢™)</li></ul><p>å‚è€ƒï¼š<a href="https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner" target="_blank" rel="noreferrer">**</a><a href="https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner" target="_blank" rel="noreferrer">https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner</a>**</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›´æ–°helm repohelm repo update</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœç´¢helmåº“ä¸­nfsç‰ˆæœ¬helm search repo nfs-subdir-external-provisioner</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ  helm ä»“åº“helm repo add nfs-subdir-external-provisioner &lt;https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-subdir-external-provisioner</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-subdir-external-provisioner/nfs-subdir-external-provisioner</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs.server=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.0.204</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs.path=/mnt/storage/k8s/pv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image.repository=registry.cn-hangzhou.aliyuncs.com/xzjs/nfs-subdir-external-provisioner</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image.tag=v4.0.0</span></span></code></pre></div><ul><li>æ‰‹åŠ¨å®‰è£… nfs-client-provisioner</li></ul><p>å‚è€ƒï¼š<a href="http://www.mydlq.club/article/109/#%E5%88%9B%E5%BB%BA-nfs-subdir-external-provisioner-%E9%83%A8%E7%BD%B2%E6%96%87%E4%BB%B6" target="_blank" rel="noreferrer">http://www.mydlq.club/article/109/#åˆ›å»º-nfs-subdir-external-provisioner-éƒ¨ç½²æ–‡ä»¶</a></p><ul><li>æˆåŠŸåï¼Œå®‰è£…æ—¶æ·»åŠ æŒä¹…åŒ–å‚æ•°ï¼Œå…¶ä¸­ nfs-storage ä¸ºå®‰è£…çš„ storageclass çš„ provisioner å­—æ®µåå­—</li></ul><h2 id="_7-å®‰è£…-kubeapps-å¯è§†åŒ–è½¯ä»¶ç®¡ç†å·¥å…·" tabindex="-1">7 å®‰è£… kubeAPPS å¯è§†åŒ–è½¯ä»¶ç®¡ç†å·¥å…· <a class="header-anchor" href="#_7-å®‰è£…-kubeapps-å¯è§†åŒ–è½¯ä»¶ç®¡ç†å·¥å…·" aria-label="Permalink to &quot;7 å®‰è£… kubeAPPS å¯è§†åŒ–è½¯ä»¶ç®¡ç†å·¥å…·&quot;">â€‹</a></h2><p>å‚è€ƒï¼š<a href="https://kubeapps.dev/docs/latest/tutorials/getting-started/" target="_blank" rel="noreferrer">**</a><a href="https://kubeapps.dev/docs/latest/tutorials/getting-started/" target="_blank" rel="noreferrer">https://kubeapps.dev/docs/latest/tutorials/getting-started/</a>**</p><ul><li>å®‰è£…</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ·»åŠ  kubeapps ä»“åº“helm repo add bitnami &lt;https://charts.bitnami.com/bitnami&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»º kubeapps çš„å‘½åç©ºé—´kubectl create namespace kubeapps</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…helm install kubeapps --namespace kubeapps bitnami/kubeapps</span></span></code></pre></div><ul><li>åˆ›å»ºè¯ä¹¦</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºç”¨äºè®¿é—® Kubeapps å’Œ Kubernetes çš„æ¼”ç¤ºå‡­è¯kubectl create --namespace default serviceaccount kubeapps-operator</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clusterrolebinding</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeapps-operator</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --clusterrole=cluster-admin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --serviceaccount=default:kubeapps-operator</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Secretmetadata:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeapps-operator-token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  annotations:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    kubernetes.io/service-account.name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeapps-operatortype:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubernetes.io/service-account-tokenEOF</span></span></code></pre></div><ul><li>æŸ¥çœ‹ä»¤ç‰Œ token</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeapps-operator-token</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-template=&#39;{{.data.token | base64decode}}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eyJhbGciOiJSUzI1NiIsImtpZCI6IkdVQTZzb3JEM1FHdkpxVDNsSEwtVEZWc2hyR08tbmFFWnFGX2Q2OGt5cEkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6Imt1YmVhcHBzLW9wZXJhdG9yLXRva2VuIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6Imt1YmVhcHBzLW9wZXJhdG9yIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiNTNjY2M0N2YtZWFmMS00NDY4LWJkN2ItYTVhMzliMzJjMzExIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmRlZmF1bHQ6a3ViZWFwcHMtb3BlcmF0b3IifQ.qsTBQODZLD1EUP5WjF_ju0-_ZFoJa2pEGCGf2zoLK71TjZeytD0GUGp4Z5ACNFuJMtedtx8tRgWhioU2oimxGdCIL4f7Szt0dOQgXD15HmoiUjYEcDQNsfTdcmfZw-m3-zwtTqa3kTTG3Wio0wf_f_ayw8qZCDL2i3PK-7h0QeAb1rQhtCz_e8huNrcshjixGlyw8aKUvdi2hPe6yvpxKJqQeOalNhT22b-ax28oIyqmC-NXYUMyRbEsgOjyuJAv6XdjqsQKbOGMKsTtNyf7CvnHl88hfRZpF0W-GuKj1ggKGYClTHuXnsv9QP-AQN1UaEtcAbUp08bHN9isedJL6w</span></span></code></pre></div><ul><li>ä¿®æ”¹æœåŠ¡æ¨¡å¼ï¼Œå°†å…¶æ”¹ä¸º NodePort</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å› ä¸ºæ˜¯æµ‹è¯•ç¯å¢ƒï¼Œå› æ­¤ç›´æ¥é‡‡ç”¨ NodePort æ–¹å¼æš´éœ²æœåŠ¡ç«¯å£kubectl edit svc kubeapps -n kubeapps</span></span></code></pre></div><ul><li>æ‰¾åˆ°ç«¯å£ï¼Œåœ¨å®‰å…¨ç»„æ”¾è¡Œ</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeapps</span></span></code></pre></div><ul><li>è®¿é—®ï¼š<a href="http://125.220.153.23:31885/" target="_blank" rel="noreferrer">http://125.220.153.23:31885/</a></li></ul><h2 id="_8-éƒ¨ç½²metallb-service-load-balancer-for-k8s" tabindex="-1">8 éƒ¨ç½²MetalLB - service load balancer for K8S <a class="header-anchor" href="#_8-éƒ¨ç½²metallb-service-load-balancer-for-k8s" aria-label="Permalink to &quot;8 éƒ¨ç½²MetalLB - service load balancer for K8S&quot;">â€‹</a></h2><ul><li><p>ç”Ÿäº§å¹³å°æ—¶ï¼Œæ„å»ºä¸€ä¸ªç½‘æ®µï¼Œä¸“é—¨ç”¨æ¥æœåŠ¡å‘å¸ƒ</p></li><li><p>kubectl edit configmap -n kube-system kube-proxy</p></li><li><p>set:</p><ul><li>apiVersion: <a href="http://kubeproxy.config.k8s.io/v1alpha1" target="_blank" rel="noreferrer">kubeproxy.config.k8s.io/v1alpha1</a> kind: KubeProxyConfiguration mode: &quot;ipvs&quot; ipvs: strictARP: true</li></ul></li><li><p>kubectl apply -f <a href="https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml" target="_blank" rel="noreferrer">https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml</a></p></li><li><p><strong>Layer 2 æ¨¡å¼é…ç½®</strong></p><ul><li><strong>åˆ›å»º IPAdressPool</strong></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IPAddressPool.yaml</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apiVersion: metallb.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kind: IPAddressPool</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name: pool223</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace: metallb-system</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  addresses:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - 55.2.1.20-55.2.1.40  #ï¼ˆæ³¨æ„ä¿®æ”¹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IPAddressPool.yaml</span></span></code></pre></div><hr><ul><li><strong>åˆ›å»º IPAdvertisementï¼šæ ‡è®°adresses poolçš„nameï¼Œç”¨äºç»™ä¸åŒçš„æœåŠ¡åˆ†é…ä¸åŒçš„ç½‘æ®µ</strong></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> L2Advertisement.yaml</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apiVersion: metallb.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kind: L2Advertisement</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name: example123</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace: metallb-system</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">spec:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ipAddressPools:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - pool223 #ä¸Šä¸€æ­¥åˆ›å»ºçš„ ip åœ°å€æ± ï¼Œé€šè¿‡åå­—è¿›è¡Œå…³è”</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> L2Advertisement.yaml</span></span></code></pre></div></li></ul><h2 id="_9-åœ¨-k8s-ä¸Šéƒ¨ç½²-postgresql" tabindex="-1">9 åœ¨ K8S ä¸Šéƒ¨ç½² PostgreSQL <a class="header-anchor" href="#_9-åœ¨-k8s-ä¸Šéƒ¨ç½²-postgresql" aria-label="Permalink to &quot;9 åœ¨ K8S ä¸Šéƒ¨ç½² PostgreSQL&quot;">â€‹</a></h2><ul><li>å®‰è£… <ul><li>æ³¨æ„ï¼šæ•°æ®åº“å®‰è£…éœ€è¦æŒä¹…å·ï¼Œéœ€æå‰åˆ›å»ºæ»¡è¶³è¦æ±‚çš„<strong>pv</strong>ï¼Œæˆ–è€…åˆ›å»º<strong>nas</strong>çš„<strong>stroageclass</strong>ï¼Œä»¥è‡ªåŠ¨æ ¹æ®<strong>mysql</strong>çš„<strong>pvc</strong>åˆ›å»º<strong>pv</strong>ã€‚</li><li>é›†ç¾¤å·²ç»é…ç½®23æœåŠ¡å™¨çš„<code>/mnt/storage/k8s/pv</code>ä¸ºNAS,å¹¶å·²ç»é…ç½®åå­—ä¸º<strong>nas-storage</strong>çš„<strong>sc</strong></li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://charts.bitnami.com/bitnam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ogeè¿™ä¸ªå‘½åç©ºé—´ï¼Œå¦åˆ™æ‰§è¡Œå¦‚ä¸‹è¿›è¡Œåˆ›å»ºkubectl create ns oge</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># postgresql è¿™ä¸ªåå­—å¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä½†åé¢æ¯ä¸€æ­¥éƒ½è¦æ³¨æ„å¯¹åº”æ›´æ”¹helm install -n oge  bitnami/postgresql \\--set global.storageClass=nfs-client \\--set readReplicas.persistence.storageClass=nfs-client \\--set primary.persistence.storageClass=nfs-client \\--set primary.persistence.size=200Gi \\--set readReplicas.persistence.size=200Gi \\--set image.tag=14.5.0-debian-11-r6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> geoctap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  bitnami/postgresql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global.storageClass=nfs-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> readReplicas.persistence.storageClass=nfs-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> primary.persistence.storageClass=nfs-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> primary.persistence.size=200Gi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> readReplicas.persistence.size=200Gi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image.tag=14.5.0-debian-11-r6</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡å®šç‰ˆæœ¬ï¼Œå¯åœ¨kubeappsé‡Œé¢æŸ¥çœ‹# --set image.tag=14.5.0-debian-11-r6</span></span></code></pre></div><ul><li>æŸ¥çœ‹ postgresql å¯†ç </li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jsonpath=&quot;{.data.postgres-password}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># å¯†ç 7jXf2gsmUX</span></span></code></pre></div><ul><li>æ›´æ”¹æœåŠ¡ç«¯å£</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> edit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgresql</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°† type=ClusterIP æ”¹ä¸º NodePort# b8:85:84:71:64:28echo &quot;SUBSYSTEM==\\&quot;net\\&quot;, ACTION==\\&quot;add\\&quot;, DRIVERS==\\&quot;?*\\&quot;, ATTR{address}==\\&quot; b8:85:84:71:64:28\\&quot;, ATTR{type}==\\&quot;1\\&quot;, KERNEL==\\&quot;eno*\\&quot;, NAME=\\&quot;eno1\\&quot;&quot; &gt;&gt; /etc/udev/rules.d/70-persistent-net.rules</span></span></code></pre></div><ul><li>ç¼©æ”¾å‰¯æœ¬é›†</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘ç°å¹¶æ²¡æœ‰postgresqlkubectl get all -n oge</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘ç°æœ‰statefulset.apps/postgresql# è®¾ç½®å‰¯æœ¬é›†ä¸ªæ•°ä¸º1kubectl scale --replicas=1 statefulset.apps/postgresql -n oge</span></span></code></pre></div><ul><li>å‘½ä»¤è¡Œè¿›å…¥pgsql</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›å…¥pgsqlçš„podkubectl exec -it -n oge postgresql-0 bash</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨æˆ·ç™»å½•psql -U postgres</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å…¥å¯†ç 7jXf2gsmUX</span></span></code></pre></div><ul><li>åœ¨podå¤–é¢æ‰§è¡Œsql</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">psql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125.220.153.23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30865</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -W</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./public.sql</span></span></code></pre></div><h2 id="_10-åœ¨-k8s-ä¸Šéƒ¨ç½²-mysql" tabindex="-1">10 åœ¨ K8S ä¸Šéƒ¨ç½² MySQL <a class="header-anchor" href="#_10-åœ¨-k8s-ä¸Šéƒ¨ç½²-mysql" aria-label="Permalink to &quot;10 åœ¨ K8S ä¸Šéƒ¨ç½² MySQL&quot;">â€‹</a></h2><ul><li>å®‰è£… <ul><li>æ³¨æ„ï¼šæ•°æ®åº“å®‰è£…éœ€è¦æŒä¹…å·ï¼Œéœ€æå‰åˆ›å»ºæ»¡è¶³è¦æ±‚çš„<code>pv</code>ï¼Œæˆ–è€…åˆ›å»º<code>nas</code>çš„ <code>stroageclass</code>ï¼Œä»¥è‡ªåŠ¨æ ¹æ®postgresqlçš„pvcåˆ›å»ºpvã€‚</li><li>é›†ç¾¤å·²ç»é…ç½®23æœåŠ¡å™¨çš„<code>/mnt/storage/k8s/pv</code>ä¸º <code>NAS</code>,å¹¶å·²ç»é…ç½®åå­—ä¸º <code>nas-storage</code> çš„ <code>sc</code></li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://charts.bitnami.com/bitnam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…helm install -n oge mysql bitnami/mysql \\--set global.storageClass=nfs-client \\--set readReplicas.persistence.storageClass=nfs-client \\--set primary.persistence.storageClass=nfs-client \\--set primary.persistence.size=200Gi \\--set readReplicas.persistence.size=200Gi</span></span></code></pre></div><ul><li>æŸ¥çœ‹ MySQL å¯†ç </li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jsonpath=&quot;{.data.mysql-root-password}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># å¯†ç VubCMiHvT1</span></span></code></pre></div><ul><li>æ›´æ”¹æœåŠ¡ç«¯å£</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> edit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†type=ClusterIPæ”¹ä¸ºNodePort# b8:85:84:71:64:28echo &quot;SUBSYSTEM==\\&quot;net\\&quot;, ACTION==\\&quot;add\\&quot;, DRIVERS==\\&quot;?*\\&quot;, ATTR{address}==\\&quot; b8:85:84:71:64:28\\&quot;, ATTR{type}==\\&quot;1\\&quot;, KERNEL==\\&quot;eno*\\&quot;, NAME=\\&quot;eno1\\&quot;&quot; &gt;&gt; /etc/udev/rules.d/70-persistent-net.rules</span></span></code></pre></div><ol><li>ç¼©æ”¾å‰¯æœ¬é›†</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘ç°å¹¶æ²¡æœ‰mysqlkubectl get all -n oge</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘ç°æœ‰statefulset.apps/mysqlkubectl scale --replicas=1 statefulset.apps/mysql -n oge</span></span></code></pre></div><ol><li>åœ¨K8Sä¸­è¿›å…¥æ•°æ®åº“</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  bash</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›å…¥åç™»å½•ç”¨æˆ·mysql -u root -p# è¾“å…¥å¯†ç </span></span></code></pre></div><h2 id="_11-åœ¨k8sä¸Šéƒ¨ç½²-mongodb" tabindex="-1">11 åœ¨K8Sä¸Šéƒ¨ç½² MongoDB <a class="header-anchor" href="#_11-åœ¨k8sä¸Šéƒ¨ç½²-mongodb" aria-label="Permalink to &quot;11 åœ¨K8Sä¸Šéƒ¨ç½² MongoDB&quot;">â€‹</a></h2><ul><li>å®‰è£… <ul><li>æ³¨æ„ï¼šæ•°æ®åº“å®‰è£…éœ€è¦æŒä¹…å·ï¼Œéœ€æå‰åˆ›å»ºæ»¡è¶³è¦æ±‚çš„pvï¼Œæˆ–è€…åˆ›å»ºnasçš„stroageclassï¼Œä»¥è‡ªåŠ¨æ ¹æ®postgresqlçš„pvcåˆ›å»ºpvã€‚</li><li>é›†ç¾¤å·²ç»é…ç½®23æœåŠ¡å™¨çš„<code>/mnt/storage/k8s/pv</code>ä¸ºNAS,å¹¶å·²ç»é…ç½®åå­—ä¸ºnas-storageçš„sc</li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://charts.bitnami.com/bitnam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…helm install -n ydy mongodb bitnami/mongodb \\--set global.storageClass=nfs-client \\--set readReplicas.persistence.storageClass=nfs-client \\--set primary.persistence.storageClass=nfs-client \\--set primary.persistence.size=100Gi \\--set readReplicas.persistence.size=100Gi</span></span></code></pre></div><ul><li>æŸ¥çœ‹ MongoDB å¯†ç </li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongodb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jsonpath=&quot;{.data.mongodb-root-password}&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># å¯†ç WUL9FPQ2V9</span></span></code></pre></div><ul><li>æ›´æ”¹æœåŠ¡ç«¯å£</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> edit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongodb</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†type=ClusterIPæ”¹ä¸ºNodePort# b8:85:84:71:64:28echo &quot;SUBSYSTEM==\\&quot;net\\&quot;, ACTION==\\&quot;add\\&quot;, DRIVERS==\\&quot;?*\\&quot;, ATTR{address}==\\&quot; b8:85:84:71:64:28\\&quot;, ATTR{type}==\\&quot;1\\&quot;, KERNEL==\\&quot;eno*\\&quot;, NAME=\\&quot;eno1\\&quot;&quot; &gt;&gt; /etc/udev/rules.d/70-persistent-net.rules</span></span></code></pre></div><ol><li>ç¼©æ”¾å‰¯æœ¬é›†</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘ç°å¹¶æ²¡æœ‰mongodbkubectl get all -n ydy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å‘ç°æœ‰statefulset.apps/mongodbkubectl scale --replicas=1 statefulset.apps/mongodb -n ydy</span></span></code></pre></div><ol><li>åœ¨K8Sä¸­è¿›å…¥æ•°æ®åº“</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mongodb-644c657c4f-x62cn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><h2 id="_12-åœ¨-k8s-ä¸Šéƒ¨ç½²-apache-spark" tabindex="-1">12 åœ¨ K8S ä¸Šéƒ¨ç½² Apache Spark <a class="header-anchor" href="#_12-åœ¨-k8s-ä¸Šéƒ¨ç½²-apache-spark" aria-label="Permalink to &quot;12 åœ¨ K8S ä¸Šéƒ¨ç½² Apache Spark&quot;">â€‹</a></h2><p>ä¸¤ä¸ªæ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹å¼ä¸ºSparkå®˜æ–¹æå‡ºçš„ï¼›ç¬¬äºŒç§ä¸ºGoogleæå‡ºçš„ï¼Œæ›´ç¬¦åˆK8SåŸç”Ÿæ¦‚å¿µ</p><ol><li>Spark On K8S</li><li>spark-on-k8s-operator</li></ol><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230408170401365.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230408170401365.png</a></p><p>image-20230408170401365</p><p>Spark On K8S</p><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230408170444023.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/image-20230408170444023.png</a></p><p>image-20230408170444023</p><p>spark-on-k8s-operator</p><h3 id="_12-1-å®‰è£…-spark-on-k8s-operator" tabindex="-1">12.1 å®‰è£… spark-on-k8s-operator <a class="header-anchor" href="#_12-1-å®‰è£…-spark-on-k8s-operator" aria-label="Permalink to &quot;12.1 å®‰è£… spark-on-k8s-operator&quot;">â€‹</a></h3><p>å‚è€ƒ ï¼š<a href="https://blog.csdn.net/w8998036/article/details/122217230" target="_blank" rel="noreferrer">https://blog.csdn.net/w8998036/article/details/122217230</a></p><ul><li>å®‰è£…</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-operator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://googlecloudplatform.github.io/spark-on-k8s-operato</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ³¨æ„æ˜¯å¦å­˜åœ¨ spark-operator å‘½åç©ºé—´ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºkubectl create ns spark-operator</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…helm install spark-operator spark-operator/spark-operator --namespace spark-operator  --set sparkJobNamespace=default  --set webhook.enable=true</span></span></code></pre></div><ul><li>åˆ›å»ºæœåŠ¡è´¦æˆ·</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-application-rbac.yaml</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å†…å®¹å¦‚ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ServiceAccountmetadata:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark---apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rbac.authorization.k8s.io/v1kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Rolemetadata:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-rolerules:-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apiGroups:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  resources: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pods&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  verbs: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]- apiGroups: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  resources: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;services&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  verbs: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]---apiVersion: rbac.authorization.k8s.io/v1kind: RoleBindingmetadata:  name: spark-role-binding  namespace: sparksubjects:- kind: ServiceAccount  name: spark  namespace: sparkroleRef:  kind: Role  name: spark-role  apiGroup: rbac.authorization.k8s.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clusterrolebinding</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root-cluster-admin-binding</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --clusterrole=cluster-admin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --user=root</span></span></code></pre></div><ul><li>ç¼–å†™ä½œä¸šæ¨¡æ¿å¹¶æäº¤ä½œä¸š</li></ul><p><em>åˆ›å»ºä¸€ä¸ªSparkä½œä¸šçš„YAMLé…ç½®æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œéƒ¨ç½²ã€‚</em></p><ol><li>åˆ›å»ºspark-pi.yamlæ–‡ä»¶</li></ol><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sparkoperator.k8s.io/v1beta2&quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">SparkApplicationmetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spark-pi  namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">sparkspec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:  </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Scala  mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">cluster  image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;registry.cn-hangzhou.aliyuncs.com/yudayu/spark:v3.1.1&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 1gcr.io/spark-operator/spark:v3.1.1éœ€è¦æ›´æ¢é•œåƒï¼Œgcr.ioç›®å‰å›½å†…æ— æ³•è®¿é—®ã€‚å¯ä»¥å…ˆå¯¹dockeræŒ‚ä»£ç†ï¼Œpullåˆ°é˜¿é‡Œäº‘é•œåƒå  imagePullPolicy: IfNotPresent  mainClass: org.apache.spark.examples.SparkPi  mainApplicationFile: &quot;local:///opt/spark/examples/jars/spark-examples_2.12-3.1.1.jar&quot;  # éœ€è¦æ›´æ¢è‡ªå·±çš„jaråŒ…ï¼ŒlocalæŒ‡è¯¥jarä½äºimageå†…ï¼Œå¯æ¢æˆæ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½è®¿é—®çš„webè·¯å¾„ï¼Œæˆ–è€…é€šè¿‡æŒ‡å®šnasæŒ‚è½½pvï¼Œå°†jaråŒ…æ”¾åœ¨nasçš„pvé‡Œ  sparkVersion: &quot;3.1.1&quot;  restartPolicy:    type: Never  volumes:    - name: &quot;test-volume&quot;      hostPath:        path: &quot;/tmp&quot;        type: Directory  driver:    cores: 1    coreLimit: &quot;1200m&quot;    memory: &quot;512m&quot;    labels:      version: 3.1.1    serviceAccount: spark    volumeMounts:      - name: &quot;test-volume&quot;        mountPath: &quot;/tmp&quot;  executor:    cores: 1    instances: 2    memory: &quot;512m&quot;    labels:      version: 3.1.1    volumeMounts:      - name: &quot;test-volume&quot;        mountPath: &quot;/tmp&quot;</span></span></code></pre></div><ol><li>éƒ¨ç½²ä¸€ä¸ªSparkè®¡ç®—ä»»åŠ¡</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-pi.yaml</span></span></code></pre></div><p>è¿ç»´</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sparkapplications</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> describe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sparkapplications</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> svc</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æŸ¥çœ‹è¯¥ä»»åŠ¡çš„spark ui</span></span></code></pre></div><h3 id="_12-2-å®‰è£…-spark-on-k8s" tabindex="-1">12.2 å®‰è£… Spark On K8S <a class="header-anchor" href="#_12-2-å®‰è£…-spark-on-k8s" aria-label="Permalink to &quot;12.2 å®‰è£… Spark On K8S&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://charts.bitnami.com/bitnam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ³¨æ„æ˜¯å¦å­˜åœ¨ spark-operator å‘½åç©ºé—´ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºkubectl create ns spark-on-k8s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-on-k8s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami/spark</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> worker.coreLimit=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">28</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/spark-submit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --class</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.spark.examples.SparkPi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark.kubernetes.container.image=bitnami/spark:3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --master</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s://https://125.220.153.23:6443</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark.kubernetes.driverEnv.SPARK_MASTER_URL=spark://10.97.43.141:7077</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--deploy-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cluster</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --executor-memory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 20G</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --num-executors</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark.executor.instances=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https:///data/spark-examples_2.12-3.3.0.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-on-k8s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-oge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tty</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Never&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--image</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami/spark:3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark-submit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --master</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> spark://10.97.43.141:7077</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--class</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.spark.examples.SparkPi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --deploy-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cluster</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/data/spark-examples_2.12-3.3.0.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100000</span></span></code></pre></div><h2 id="_13-åœ¨k8sä¸Šéƒ¨ç½²redisé›†ç¾¤" tabindex="-1">13 åœ¨K8Sä¸Šéƒ¨ç½²redisé›†ç¾¤ <a class="header-anchor" href="#_13-åœ¨k8sä¸Šéƒ¨ç½²redisé›†ç¾¤" aria-label="Permalink to &quot;13 åœ¨K8Sä¸Šéƒ¨ç½²redisé›†ç¾¤&quot;">â€‹</a></h2><ul><li>å¾…æ›´</li></ul><h2 id="_14-åœ¨k8sä¸Šéƒ¨ç½²nginx" tabindex="-1">14 åœ¨K8Sä¸Šéƒ¨ç½²nginx <a class="header-anchor" href="#_14-åœ¨k8sä¸Šéƒ¨ç½²nginx" aria-label="Permalink to &quot;14 åœ¨K8Sä¸Šéƒ¨ç½²nginx&quot;">â€‹</a></h2><h3 id="_14-1-åˆ›å»ºpv" tabindex="-1">14.1 åˆ›å»ºpv <a class="header-anchor" href="#_14-1-åˆ›å»ºpv" aria-label="Permalink to &quot;14.1 åˆ›å»ºpv&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-pv.yaml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PersistentVolumemetadata:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-ydy-pv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydyspec:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  capacity:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    storage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  accessModes:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ReadWriteOnce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  persistentVolumeReclaimPolicy:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Retain</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  storageClassName:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manual</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  hostPath:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    path:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/storage/k8s/pv/ydy-nginx-pvc</span></span></code></pre></div><h3 id="_14-2-åˆ›å»ºpvc" tabindex="-1">14.2 åˆ›å»ºpvc <a class="header-anchor" href="#_14-2-åˆ›å»ºpvc" aria-label="Permalink to &quot;14.2 åˆ›å»ºpvc&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-pvc.yaml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PersistentVolumeClaimmetadata:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-ydy-pvc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  namespace:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydyspec:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  accessModes:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ReadWriteOnce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  resources:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    requests:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      storage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10Gi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  storageClassName:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manual</span></span></code></pre></div><h3 id="_14-3-å®‰è£…nginxå¹¶è®¾ç½®é™æ€èµ„æºæŒ‚è½½çš„pvc" tabindex="-1">14.3 å®‰è£…nginxå¹¶è®¾ç½®é™æ€èµ„æºæŒ‚è½½çš„pvc <a class="header-anchor" href="#_14-3-å®‰è£…nginxå¹¶è®¾ç½®é™æ€èµ„æºæŒ‚è½½çš„pvc" aria-label="Permalink to &quot;14.3 å®‰è£…nginxå¹¶è®¾ç½®é™æ€èµ„æºæŒ‚è½½çš„pvc&quot;">â€‹</a></h3><p>å°†nginxä¸­çš„<code>/app</code>æŒ‚è½½åˆ°<code>/mnt/storage/k8s/pv/luluancheng-nginx-pvc</code>ä¸‹</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">helm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitnami/nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">--set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> staticSitePVC=nginx-ydy-pvc</span></span></code></pre></div><h2 id="é™„å½•-ç–‘éš¾é—®é¢˜è§£å†³" tabindex="-1">é™„å½•ï¼šç–‘éš¾é—®é¢˜è§£å†³ï¼š <a class="header-anchor" href="#é™„å½•-ç–‘éš¾é—®é¢˜è§£å†³" aria-label="Permalink to &quot;é™„å½•ï¼šç–‘éš¾é—®é¢˜è§£å†³ï¼š&quot;">â€‹</a></h2><h3 id="_1-cniç½‘ç»œé”™è¯¯" tabindex="-1">1 CNIç½‘ç»œé”™è¯¯ <a class="header-anchor" href="#_1-cniç½‘ç»œé”™è¯¯" aria-label="Permalink to &quot;1 CNIç½‘ç»œé”™è¯¯&quot;">â€‹</a></h3><ul><li>å½“è¿ç§»é›†ç¾¤ä¹‹åï¼Œæ‹‰å–é•œåƒæŠ¥cniç½‘ç»œé”™è¯¯ï¼Œå¦‚ä¸‹ï¼š</li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/8d5d49703c8ac59f24fde81b3982b616.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/8d5d49703c8ac59f24fde81b3982b616.png</a></p><p>8d5d49703c8ac59f24fde81b3982b616</p><ul><li>ä»ä¸Šé¢çš„æˆªå›¾ä¸­çœ‹åˆ°é—®é¢˜å‡ºç°åœ¨ç»™Podåˆ†é…IPä¸Šï¼Œæ„æ€æ˜¯ cni0 çš„IPä¸åŒäº``10.244.9.1/24<code>ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ </code>ifconfig`å‘½ä»¤æŸ¥çœ‹IPä¿¡æ¯</li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/79e65e4f797200ad98feac6f8b2d4254.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/79e65e4f797200ad98feac6f8b2d4254.png</a></p><p>79e65e4f797200ad98feac6f8b2d4254</p><ul><li>ä»ä¸Šé¢çš„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>flannel.1</code>çš„ <strong>IP</strong> ä¸º<code>10.244.9.0</code>ï¼Œç„¶åæˆ‘ä»¬åˆä½¿ç”¨<code>cat /run/flannel/subnet.env</code>ï¼Œè¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</li></ul><p>!<a href="https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/310efbdb614636a17aa48eaf4a8dc2c5.png" target="_blank" rel="noreferrer">https://cdn.jsdelivr.net/gh/binwenwu/picgo_demo/img/310efbdb614636a17aa48eaf4a8dc2c5.png</a></p><p>310efbdb614636a17aa48eaf4a8dc2c5</p><ul><li>å…¶å®ç°åœ¨çš„é—®é¢˜å°±æ¯”è¾ƒæ˜ç¡®äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„Overlay networkä¸ºFlannelï¼Œä¹Ÿå°±æ˜¯è¯´Podçš„IPåœ°å€æ®µåº”è¯¥åœ¨Flannelçš„subnetä¸‹ï¼Œè€Œç°åœ¨æˆ‘ä»¬çœ‹åˆ°cni0çš„IPåœ°å€æ®µä¸flannel subnetåœ°å€æ®µä¸åŒï¼Œæ‰€ä»¥å°±å‡ºç°äº†é—®é¢˜ã€‚</li><li>è§£å†³æ–¹æ¡ˆ <ul><li>æ–¹æ³•1æ˜¯å°† cni0 çš„ IP æ®µä¿®æ”¹ä¸º<code>10.244.9.1</code></li><li>æ–¹æ³•2æ˜¯å°†è¿™ä¸ªé”™è¯¯çš„ç½‘å¡åˆ é™¤æ‰ï¼Œä¹‹åä¼šè‡ªåŠ¨é‡å»º</li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸‹é¢æˆ‘ä»¬åˆ é™¤é”™è¯¯çš„cni0ï¼Œç„¶åè®©å®ƒè‡ªå·±é‡å»ºifconfig cni0 down</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cni0</span></span></code></pre></div><h3 id="_2-kubeadminå®‰è£…å¤±è´¥é‡ç½®" tabindex="-1">2 kubeadminå®‰è£…å¤±è´¥é‡ç½® <a class="header-anchor" href="#_2-kubeadminå®‰è£…å¤±è´¥é‡ç½®" aria-label="Permalink to &quot;2 kubeadminå®‰è£…å¤±è´¥é‡ç½®&quot;">â€‹</a></h3><p>kubeadminå®‰å…¨è¯ä¹¦é—®é¢˜</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/ad792d4a-5e14-4539-9667-46651c4cdd84/4f28c43e-f333-468e-bd1e-94dbe82ef56d/kubeadmin.png" alt="kubeadmin.png"></p><p>éœ€è¦æ¸…é™¤æ®‹ç•™æ–‡ä»¶åé‡ç½®kubeadminç¯å¢ƒ</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubernetes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubelet.conf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubernetes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pki</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ca.crt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kubeadm reset</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">åŠ å…¥å…¨å±€å˜é‡æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">profile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">profile</span></span></code></pre></div><h3 id="_4-å¼‚å¸¸æ–­ç”µç­‰å¯¼è‡´-etcd-å¿ƒè·³æ£€æµ‹å‡ºç°é—®é¢˜" tabindex="-1">4 å¼‚å¸¸æ–­ç”µç­‰å¯¼è‡´ etcd å¿ƒè·³æ£€æµ‹å‡ºç°é—®é¢˜ <a class="header-anchor" href="#_4-å¼‚å¸¸æ–­ç”µç­‰å¯¼è‡´-etcd-å¿ƒè·³æ£€æµ‹å‡ºç°é—®é¢˜" aria-label="Permalink to &quot;4 å¼‚å¸¸æ–­ç”µç­‰å¯¼è‡´ etcd å¿ƒè·³æ£€æµ‹å‡ºç°é—®é¢˜&quot;">â€‹</a></h3><ul><li><a href="https://github.com/kubernetes/kubernetes/issues/107491" target="_blank" rel="noreferrer">Kubernetes API Server cannot be started after improper reboot</a></li><li><a href="https://blog.51cto.com/liruilong/6060676" target="_blank" rel="noreferrer">K8S: etcd é›†ç¾¤å¤‡ä»½ç¾éš¾æ¢å¤æ“ä½œæ‰‹å†Œ</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-16591eae data-v-cca2f5fd><!--[--><!--]--><div class="edit-info" data-v-cca2f5fd><!----><div class="last-updated" data-v-cca2f5fd><div class="py-1 text-sm font-medium" data-v-cca2f5fd> ğŸ“ Last updated: 2024-12-24 16:08</div></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-cca2f5fd><span class="visually-hidden" id="doc-footer-aria-label" data-v-cca2f5fd>Pager</span><div class="pager" data-v-cca2f5fd><a class="VPLink link pager-link prev" href="/Notes/Learning/kubernates%E7%AC%94%E8%AE%B0/k8s.html" data-v-cca2f5fd><!--[--><span class="desc" data-v-cca2f5fd>Previous page</span><span class="title" data-v-cca2f5fd>k8s</span><!--]--></a></div><div class="pager" data-v-cca2f5fd><a class="VPLink link pager-link next" href="/Notes/Learning/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Day1.html" data-v-cca2f5fd><!--[--><span class="desc" data-v-cca2f5fd>Next page</span><span class="title" data-v-cca2f5fd>Day1</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="relative px-6 pt-8 pb-4 text-center border-t dark:border-zinc-800 sm:pt-8 text-black/40 dark:text-zinc-300/60" data-v-88239e62><p class="text-sm font-medium">Copyright Â© 2024 Chry</p></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"aboutme.md\":\"DETHcE0U\",\"friends.md\":\"D9lfppyh\",\"index.md\":\"D-gYMmwG\",\"notes_index.md\":\"B1C2FMnj\",\"notes_interviews_index.md\":\"8NLWWS-R\",\"notes_learning_index.md\":\"tXaNhdbK\",\"notes_learning_kubernatesç¬”è®°_k8s.md\":\"Cw4fGyUn\",\"notes_learning_kubernatesç¬”è®°_k8sé›†ç¾¤æ­å»ºæ•™ç¨‹.md\":\"BMKBUoVa\",\"notes_learning_åç«¯å­¦ä¹ ç¬”è®°_day1.md\":\"oGEQNRky\",\"notes_learning_é¡¹ç›®ç›¸å…³ç¬”è®°_å´©å²¸é¡¹ç›®_æ“ä½œæ–‡æ¡£.md\":\"B_iGwxpT\",\"notes_learning_é¡¹ç›®ç›¸å…³ç¬”è®°_æ°´æ²™ç›‘æµ‹é¡¹ç›®_ç³»ç»Ÿé‡å¯æ–‡æ¡£.md\":\"CpEJOfr7\",\"projects.md\":\"C-TSy2au\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Chry\",\"titleTemplate\":\"Chry\",\"description\":\"Chry's Tech Blog: An undergraduate's journey through backend development, sharing insights, tips, and experiences in web technologies.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.jpg\",\"nav\":[{\"text\":\"ğŸ‘‹ AboutMe\",\"link\":\"AboutMe.md\"},{\"text\":\"ğŸ’­ Blogs\",\"link\":\"/Notes/index.md\"},{\"text\":\"ğŸ¦„ Projects\",\"link\":\"Projects.md\"},{\"text\":\"ğŸ‘« Friends\",\"link\":\"Friends.md\"}],\"sidebar\":{\"/Notes/\":{\"text\":\"Notes\",\"items\":[{\"text\":\"Learning\",\"items\":[{\"text\":\"kubernatesç¬”è®°\",\"items\":[{\"link\":\"/Notes/Learning/kubernatesç¬”è®°/k8s\",\"text\":\"k8s\"},{\"link\":\"/Notes/Learning/kubernatesç¬”è®°/k8sé›†ç¾¤æ­å»ºæ•™ç¨‹\",\"text\":\"k8sé›†ç¾¤æ­å»ºæ•™ç¨‹\"}],\"collapsed\":true,\"link\":\"\"},{\"text\":\"åç«¯å­¦ä¹ ç¬”è®°\",\"items\":[{\"link\":\"/Notes/Learning/åç«¯å­¦ä¹ ç¬”è®°/Day1\",\"text\":\"Day1\"}],\"collapsed\":true,\"link\":\"\"},{\"text\":\"é¡¹ç›®ç›¸å…³ç¬”è®°\",\"items\":[{\"text\":\"å´©å²¸é¡¹ç›®\",\"items\":[{\"link\":\"/Notes/Learning/é¡¹ç›®ç›¸å…³ç¬”è®°/å´©å²¸é¡¹ç›®/æ“ä½œæ–‡æ¡£\",\"text\":\"æ“ä½œæ–‡æ¡£\"}],\"collapsed\":true,\"link\":\"\"},{\"text\":\"æ°´æ²™ç›‘æµ‹é¡¹ç›®\",\"items\":[{\"link\":\"/Notes/Learning/é¡¹ç›®ç›¸å…³ç¬”è®°/æ°´æ²™ç›‘æµ‹é¡¹ç›®/ç³»ç»Ÿé‡å¯æ–‡æ¡£\",\"text\":\"ç³»ç»Ÿé‡å¯æ–‡æ¡£\"}],\"collapsed\":true,\"link\":\"\"}],\"collapsed\":true,\"link\":\"\"}],\"collapsed\":false,\"link\":\"/Notes/Learning/index\",\"updateTime\":\"2024-10-31 09:30\",\"desc\":\"ä¸€äº›å­¦ä¹ ç¬”è®°\",\"tags\":\"ğŸš§ æ–½å·¥ä¸­...\",\"outline\":\"deep\"}]}},\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/1CHRY1\"}],\"footer\":{\"copyright\":\"Copyright Â© 2024 Chry\"},\"outlineTitle\":\"å¯¼èˆªæ \"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>